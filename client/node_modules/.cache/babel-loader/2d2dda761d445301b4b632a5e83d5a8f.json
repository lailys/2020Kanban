{"ast":null,"code":"import _classCallCheck from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import opensocket from\"socket.io-client\";import moment from\"moment\";import Member from\"./Member\";import{DateTimeInput}from\"semantic-ui-calendar-react\";import{Form}from\"semantic-ui-react\";var TaskPage=/*#__PURE__*/function(_Component){_inherits(TaskPage,_Component);var _super=_createSuper(TaskPage);function TaskPage(){var _this;_classCallCheck(this,TaskPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={members:[],pic:\"\",image:{},optionDisplay:\"none\",deadline:\"\",datetime:\"\",priority:\"\",comments:[],newComment:{}};_this.componentDidMount=function(){_this.getMembers();_this.fetchComments();if(_this.props.task.deadline){_this.setState({deadline:moment(_this.props.task.deadline).format(\"MMMM Do YYYY, HH:mm a \"),datetime:_this.props.task.deadline,priority:_this.props.task.priority});}else{_this.setState({deadline:\"\",datetime:_this.props.task.deadline,priority:_this.props.task.priority});}if(_this.props.task.pic!==\"\"){_this.setState({pic:\"http://localhost:8080/\".concat(_this.props.task.pic)});}else{_this.setState({pic:\"\"});}var socket=opensocket(\"http://localhost:8080\");socket.on(\"taskComment\",function(data){if(data.action===\"create\"){_this.fetchComments();}});socket.on(\"taskMember\",function(data){if(data.action===\"create\"||data.action===\"delete\"){_this.getMembers();}});socket.on(\"taskImg\",function(data){if(data.action===\"create\"){_this.setState({pic:\"/\".concat(data.img)});}});};_this.fetchComments=function(){fetch(\"/comments/\".concat(_this.props.task._id)).then(function(res){return res.json();}).then(function(result){_this.setState({comments:result.comments});});};_this.getMembers=function(){fetch(\"/task-members/\".concat(_this.props.task._id),{headers:{Authorization:\"Bearer \"+_this.props.token}}).then(function(res){return res.json();}).then(function(result){_this.setState({members:result.members});});};_this.createImg=function(e){e.preventDefault();var file=e.target.files[0];_this.setState({pic:URL.createObjectURL(file)});var image=Object.assign({},_this.state.image);image[e.target.id]=e.target.files[0];_this.setState({image:image});};_this.handleChange=function(e,_ref){var name=_ref.name,value=_ref.value;_this.setState({deadline:value,datetime:value});};_this.createEdit=function(e){_this.setState({priority:e.target.value});};_this.createComment=function(e){_this.setState({newComment:{id:_this.props.user,comment:e.target.value}});};_this.updateMembers=function(members){_this.setState({members:members});};_this.submitImg=function(e){e.preventDefault();if(_this.props.task.creator===_this.props.user){var formData=new FormData();Object.keys(_this.state.image).map(function(key){formData.append(key,_this.state.image[key]);});fetch(\"http://localhost:8080/taskImg/\".concat(_this.props.user,\"-\").concat(_this.props.task._id),{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token},body:formData}).then(function(result){return result.json();}).then(function(result){if(result.done){}else{alert(result.message);}});}else{alert(\"you are not eligible to change the picture\");}};_this.participate=function(e){e.preventDefault();fetch(\"http://localhost:8080/task-members\",{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({task:_this.props.task,user:_this.props.user})}).then(function(result){return result.json();}).then(function(result){if(result.done){console.log(result,\">>>>>\");// this.setState({ members :result.members});\n}else{alert(result.message);}});};_this.submitComment=function(e){e.preventDefault();_this.setState({newComment:{}});fetch(\"http://localhost:8080/task-comment\",{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({comment:_this.state.newComment,user:_this.props.user,responders:_this.props.task.responders,taskId:_this.props.task._id,date:new Date()})}).then(function(result){return result.json();}).then(function(result){if(result.done){_this.setState({newComment:{}});}else{alert(result.message);}});};_this.submitChange=function(e){e.preventDefault();if(_this.props.token){fetch(\"http://localhost:8080/update-task\",{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({id:_this.props.task._id,title:_this.props.task.title,description:_this.props.task.description,priority:_this.state.priority,url:_this.props.task.url||\"\",deadline:_this.state.datetime,user:_this.props.user})}).then(function(result){return result.json();}).then(function(result){if(!result.done){alert(result.message);}});}else{_this.props.history.push(\"/login\");}};_this.renderMembers=function(){console.log(_this.state.members,\">>>>>>>><<<<<<<<<<<\");var all=[];_this.state.members.map(function(member,i){// console.log(member,\"------------------->\")\nall.push(/*#__PURE__*/React.createElement(Member,{key:\"img-\".concat(i),member:member,members:member.responders,updateMembers:_this.updateMembers,i:i,token:_this.props.token,task:_this.props.task,user:_this.props.user}));});return/*#__PURE__*/React.createElement(\"div\",{className:\"task-page-members\",key:\"task-page-members\"},all);};_this.renderCommentArea=function(){var all=[];if(_this.state.comments.length>0){_this.state.comments.map(function(comment,i){all.push(/*#__PURE__*/React.createElement(\"div\",{className:\"comment-cube\",key:\"comment-cube-\".concat(i)},/*#__PURE__*/React.createElement(\"p\",{className:\"comment\"},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"110%\",fontWeight:\"400\"}},\"\".concat(comment.commenter,\": \")),comment.comment,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"comment-date\",style:{fontSize:\"80%\",fontWeight:\"400\"}},!comment.date?\"\":moment(comment.date).format(\"MMMM Do YYYY, HH:mm a \")))));});}if(_this.props.token){return/*#__PURE__*/React.createElement(\"div\",{className:\"comments-area\",key:\"comments-area\"},all,/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this.submitComment},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{id:\"text-area\",value:_this.state.newComment.comment||\"\",onChange:function onChange(e){return _this.createComment(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"post-comment-btn\"},\"COMMENT\")));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"comments-area\",key:\"comments-area\"},all);}};_this.defaultPriority=function(priority){if(priority===\"#0aa7f5\"){return\"STANDARD\";}else if(priority===\"#EDF67D\"){return\"FIXED DATE\";}else if(priority===\"#ff006e\"){return\"EXPEDITE\";}};_this.renderPage=function(){var now=new Date();if(_this.props.token){var style={position:\"relative\"};if(_this.state.pic){style.backgroundImage=\"url(\\\"\".concat(_this.state.pic,\"\\\")\");style.height=\"40vh\";}else{style.backgroundImage=\"\";style.height=\"10vh\";}return/*#__PURE__*/React.createElement(\"div\",{className:\"task-page-container\",style:{width:_this.props.overflowWidth}},/*#__PURE__*/React.createElement(\"div\",{className:\"task-overflow\",style:{width:_this.props.overflowWidth}},/*#__PURE__*/React.createElement(\"form\",{id:\"input\",style:style,onSubmit:_this.submitImg,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{className:\"task-picUrl\",type:\"file\",name:\"picUrl\",id:\"picUrl\",onChange:function onChange(e){return _this.createImg(e);}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",id:\"task-img-update-btn\",className:\"fas fa-pencil-alt\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"task-page-name\"},_this.props.task.title.toUpperCase()),/*#__PURE__*/React.createElement(\"p\",{className:\"task-page-desc\"},_this.props.task.description,/*#__PURE__*/React.createElement(\"a\",{href:\"\".concat(_this.props.task.url)},\"LINK\")),/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return _this.submitChange(e);},id:\"edit-date-form\"},/*#__PURE__*/React.createElement(DateTimeInput,{initialDate:now,id:\"date-timeInput\",className:\"task-page-date\",name:\"dateTime\",placeholder:\"Deadline\",value:_this.state.deadline,iconPosition:\"right\",onChange:_this.handleChange,style:{width:\"40vw\",border:\"none\",outline:\"none\"},dateTimeFormat:\"YYYY-MM-DD HH:mm\"}),/*#__PURE__*/React.createElement(\"select\",{value:_this.state.priority,onChange:function onChange(e){return _this.createEdit(e);},id:\"edit-select\",style:{border:\"none\",outline:\"none\"}},/*#__PURE__*/React.createElement(\"option\",{value:\"\".concat(_this.state.priority),style:{color:_this.state.priority,fontSize:\"300%\",fontWeight:\"bolder\"},defaultValue:true},_this.defaultPriority(_this.state.priority)),/*#__PURE__*/React.createElement(\"option\",{value:\"#0aa7f5\"},\"STANDARD\"),/*#__PURE__*/React.createElement(\"option\",{value:\"#EDF67D\"},\"FIXED DATE\"),/*#__PURE__*/React.createElement(\"option\",{value:\"#ff006e\"},\"EXPEDITE\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",id:\"update-button\",className:\"fas fa-pencil-alt\"})),_this.renderCommentArea(),_this.renderMembers(),/*#__PURE__*/React.createElement(\"div\",{className:\"participate-btn\",onClick:function onClick(e){return _this.participate(e);}},\"+\")));}else{var _style={position:\"relative\"};if(_this.state.pic!==\"\"){_style.backgroundImage=\"url(\\\"\".concat(_this.state.pic,\"\\\")\");_style.height=\"40vh\";}else{_style.backgroundImage=\"\";_style.height=\"10vh\";}return/*#__PURE__*/React.createElement(\"div\",{className:\"task-page-container\",style:{width:_this.props.overflowWidth}},/*#__PURE__*/React.createElement(\"div\",{className:\"task-overflow\",style:{width:_this.props.overflowWidth}},/*#__PURE__*/React.createElement(\"div\",{id:\"input\",style:_style}),/*#__PURE__*/React.createElement(\"div\",{className:\"task-page-name\"},_this.props.task.title.toUpperCase()),/*#__PURE__*/React.createElement(\"p\",{className:\"task-page-desc\"},_this.props.task.description,/*#__PURE__*/React.createElement(\"a\",{className:\"task-page-link-inside\",href:\"\".concat(_this.props.task.url)},/*#__PURE__*/React.createElement(\"span\",null),\"LINK\"),/*#__PURE__*/React.createElement(\"span\",{className:\"task-page-date-inside\",style:{color:\"#ff006e\",width:\"66vw\",height:\"3vh\",margin:\"1vh 0\"}},_this.state.deadline,\" \")),/*#__PURE__*/React.createElement(\"div\",{id:\"edit-date-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"edit-date-form-p\",style:{border:\"solid .1px \".concat(_this.state.priority)}},_this.defaultPriority(_this.state.priority))),_this.renderCommentArea(),_this.renderMembers()));}};return _this;}_createClass(TaskPage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"task-page\",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},this.renderPage());}}]);return TaskPage;}(Component);export default TaskPage;","map":{"version":3,"sources":["/Users/lailysarvarian/a-kanban/client/src/components/TaskPage.js"],"names":["React","Component","opensocket","moment","Member","DateTimeInput","Form","TaskPage","state","members","pic","image","optionDisplay","deadline","datetime","priority","comments","newComment","componentDidMount","getMembers","fetchComments","props","task","setState","format","socket","on","data","action","img","fetch","_id","then","res","json","result","headers","Authorization","token","createImg","e","preventDefault","file","target","files","URL","createObjectURL","Object","assign","id","handleChange","name","value","createEdit","createComment","user","comment","updateMembers","submitImg","creator","formData","FormData","keys","map","key","append","method","body","done","alert","message","participate","JSON","stringify","console","log","submitComment","responders","taskId","date","Date","submitChange","title","description","url","history","push","renderMembers","all","member","i","renderCommentArea","length","fontSize","fontWeight","commenter","defaultPriority","renderPage","now","style","position","backgroundImage","height","width","overflowWidth","toUpperCase","border","outline","color","margin","pageWidth","left","pageLeft","borderRadius","pageRadius","alignItems","flexFlow"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport opensocket from \"socket.io-client\";\nimport moment from \"moment\";\nimport Member from \"./Member\";\nimport { DateTimeInput } from \"semantic-ui-calendar-react\";\nimport { Form } from \"semantic-ui-react\";\n\nclass TaskPage extends Component {\n  state = {\n    members: [],\n    pic: \"\",\n    image: {},\n    optionDisplay: \"none\",\n    deadline: \"\",\n    datetime: \"\",\n    priority: \"\",\n    comments: [],\n    newComment: {},\n  };\n  componentDidMount = () => {\n    this.getMembers();\n    this.fetchComments();\n    if (this.props.task.deadline) {\n      this.setState({\n        deadline: moment(this.props.task.deadline).format(\n          \"MMMM Do YYYY, HH:mm a \"\n        ),\n        datetime: this.props.task.deadline,\n        priority: this.props.task.priority,\n      });\n    } else {\n      this.setState({\n        deadline: \"\",\n        datetime: this.props.task.deadline,\n        priority: this.props.task.priority,\n      });\n    }\n    if (this.props.task.pic !== \"\") {\n      this.setState({\n        pic: `http://localhost:8080/${this.props.task.pic}`,\n      });\n    } else {\n      this.setState({\n        pic: \"\",\n      });\n    }\n    const socket = opensocket(\"http://localhost:8080\");\n    socket.on(\"taskComment\", (data) => {\n      if (data.action === \"create\" ) {\n        this.fetchComments();\n      }\n    });\n    socket.on(\"taskMember\", (data) => {\n      if (data.action === \"create\"||data.action === \"delete\") {\n        this.getMembers();\n      }\n    });\n    socket.on(\"taskImg\", (data) => {\n      if (data.action === \"create\") {\n        this.setState({ pic: `/${data.img}` });\n      }\n    });\n  };\n  fetchComments = () => {\n    fetch(`/comments/${this.props.task._id}`)\n      .then((res) => {\n        return res.json();\n      })\n      .then((result) => {\n        this.setState({ comments: result.comments });\n      });\n  };\n  getMembers = () => {\n    fetch(`/task-members/${this.props.task._id}`, {\n      headers: {\n        Authorization: \"Bearer \" + this.props.token,\n      },\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then((result) => {\n        this.setState({ members: result.members });\n      });\n  };\n  createImg = (e) => {\n    e.preventDefault();\n    const file = e.target.files[0];\n    this.setState({ pic: URL.createObjectURL(file) });\n    let image = Object.assign({}, this.state.image);\n    image[e.target.id] = e.target.files[0];\n    this.setState({ image });\n  };\n  handleChange = (e, { name, value }) => {\n    this.setState({\n      deadline: value,\n      datetime: value,\n    });\n  };\n  createEdit = (e) => {\n    this.setState({ priority: e.target.value });\n  };\n  createComment = (e) => {\n    this.setState({\n      newComment: { id: this.props.user, comment: e.target.value },\n    });\n  };\n  updateMembers = (members) => {\n    this.setState({ members });\n  };\n  submitImg = (e) => {\n    e.preventDefault();\n    if (this.props.task.creator === this.props.user) {\n      var formData = new FormData();\n      Object.keys(this.state.image).map((key) => {\n        formData.append(key, this.state.image[key]);\n      });\n      fetch(\n        `http://localhost:8080/taskImg/${this.props.user}-${this.props.task._id}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + this.props.token,\n          },\n          body: formData,\n        }\n      )\n        .then((result) => {\n          return result.json();\n        })\n        .then((result) => {\n          if (result.done) {\n          } else {\n            alert(result.message);\n          }\n        });\n    } else {\n      alert(\"you are not eligible to change the picture\");\n    }\n  };\n  participate = (e) => {\n    e.preventDefault();\n    fetch(\"http://localhost:8080/task-members\", {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + this.props.token,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        task: this.props.task,\n        user: this.props.user,\n      }),\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((result) => {\n        if (result.done) {\n          console.log(result,\">>>>>\")\n          // this.setState({ members :result.members});\n        } else {\n          alert(result.message);\n        }\n      });\n  };\n  submitComment = (e) => {\n    e.preventDefault();\n    this.setState({ newComment: {} });\n    fetch(`http://localhost:8080/task-comment`, {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + this.props.token,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        comment: this.state.newComment,\n        user: this.props.user,\n        responders: this.props.task.responders,\n        taskId: this.props.task._id,\n        date: new Date(),\n      }),\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((result) => {\n        if (result.done) {\nthis.setState({newComment:{}})       \n } else {\n          alert(result.message);\n        }\n      });\n  };\n  submitChange = (e) => {\n    e.preventDefault();\n    if (this.props.token) {\n      fetch(\"http://localhost:8080/update-task\", {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + this.props.token,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          id: this.props.task._id,\n          title: this.props.task.title,\n          description: this.props.task.description,\n          priority: this.state.priority,\n          url: this.props.task.url || \"\",\n          deadline: this.state.datetime,\n          user: this.props.user,\n        }),\n      })\n        .then((result) => {\n          return result.json();\n        })\n        .then((result) => {\n          if (!result.done) {\n            alert(result.message);\n          }\n        });\n    } else {\n      this.props.history.push(\"/login\");\n    }\n  };\n  renderMembers = () => {\n    console.log( this.state.members,\">>>>>>>><<<<<<<<<<<\")\n    let all = [];\n    this.state.members.map((member, i) => {\n      // console.log(member,\"------------------->\")\n      all.push(\n        <Member\n          key={`img-${i}`}\n          member={member}\n          members={member.responders}\n          updateMembers={this.updateMembers}\n          i={i}\n          token={this.props.token}\n          task={this.props.task}\n          user={this.props.user}\n        />\n      );\n    });\n    return (\n      <div className=\"task-page-members\" key=\"task-page-members\">\n        {all}\n      </div>\n    );\n  };\n  renderCommentArea = () => {\n    let all = [];\n    if (this.state.comments.length > 0) {\n      this.state.comments.map((comment, i) => {\n        all.push(\n          <div className=\"comment-cube\" key={`comment-cube-${i}`}>\n            <p className=\"comment\">\n              <span style={{ fontSize: \"110%\", fontWeight: \"400\" }}>\n                {`${comment.commenter}: `}\n              </span>\n              {comment.comment}\n              <br />\n              <span\n                className=\"comment-date\"\n                style={{ fontSize: \"80%\", fontWeight: \"400\" }}\n              >\n                {!comment.date\n                  ? \"\"\n                  : moment(comment.date).format(\"MMMM Do YYYY, HH:mm a \")}\n              </span>\n            </p>\n          </div>\n        );\n      });\n    }\n    if (this.props.token) {\n      return (\n        <div className=\"comments-area\" key=\"comments-area\">\n          {all}\n          <form onSubmit={this.submitComment}>\n            <br />\n            <textarea\n              id=\"text-area\"\n              value={this.state.newComment.comment||\"\"}\n              onChange={(e) => this.createComment(e)}\n            ></textarea>\n            <br />\n            <button type=\"submit\" className=\"post-comment-btn\">\n              COMMENT\n            </button>\n          </form>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"comments-area\" key=\"comments-area\">\n          {all}\n        </div>\n      );\n    }\n  };\n  defaultPriority = (priority) => {\n    if (priority === \"#0aa7f5\") {\n      return \"STANDARD\";\n    } else if (priority === \"#EDF67D\") {\n      return \"FIXED DATE\";\n    } else if (priority === \"#ff006e\") {\n      return \"EXPEDITE\";\n    }\n  };\n  renderPage = () => {\n    const now = new Date();\n\n    if (this.props.token) {\n      const style = {\n        position: \"relative\",\n      };\n\n      if (this.state.pic) {\n        style.backgroundImage = `url(\"${this.state.pic}\")`;\n        style.height = \"40vh\";\n      } else {\n        style.backgroundImage = \"\";\n        style.height = \"10vh\";\n      }\n      return (\n        <div\n          className=\"task-page-container\"\n          style={{\n            width: this.props.overflowWidth,\n          }}\n        >\n          <div\n            className=\"task-overflow\"\n            style={{ width: this.props.overflowWidth }}\n          >\n            <form\n              id=\"input\"\n              style={style}\n              onSubmit={this.submitImg}\n              encType=\"multipart/form-data\"\n            >\n              <input\n                className=\"task-picUrl\"\n                type=\"file\"\n                name=\"picUrl\"\n                id=\"picUrl\"\n                onChange={(e) => this.createImg(e)}\n              />\n              <button\n                type=\"submit\"\n                id=\"task-img-update-btn\"\n                className=\"fas fa-pencil-alt\"\n              ></button>\n            </form>\n            <div className=\"task-page-name\">\n              {this.props.task.title.toUpperCase()}\n            </div>\n            <p className=\"task-page-desc\">\n              {this.props.task.description}\n              <a href={`${this.props.task.url}`}>LINK</a>\n            </p>\n            <Form onSubmit={(e) => this.submitChange(e)} id=\"edit-date-form\">\n              <DateTimeInput\n                initialDate={now}\n                id=\"date-timeInput\"\n                className=\"task-page-date\"\n                name=\"dateTime\"\n                placeholder=\"Deadline\"\n                value={this.state.deadline}\n                iconPosition=\"right\"\n                onChange={this.handleChange}\n                style={{ width: \"40vw\", border: \"none\", outline: \"none\" }}\n                dateTimeFormat=\"YYYY-MM-DD HH:mm\"\n              />\n              <select\n                value={this.state.priority}\n                onChange={(e) => this.createEdit(e)}\n                id=\"edit-select\"\n                style={{ border: \"none\", outline: \"none\" }}\n              >\n                <option\n                  value={`${this.state.priority}`}\n                  style={{\n                    color: this.state.priority,\n                    fontSize: \"300%\",\n                    fontWeight: \"bolder\",\n                  }}\n                  defaultValue\n                >\n                  {this.defaultPriority(this.state.priority)}\n                </option>\n                <option value=\"#0aa7f5\">STANDARD</option>\n                <option value=\"#EDF67D\">FIXED DATE</option>\n                <option value=\"#ff006e\">EXPEDITE</option>\n                {/* DD1E00 ,  FE23BA */}\n              </select>\n              <br />\n              <br />\n              <button\n                type=\"submit\"\n                id=\"update-button\"\n                className=\"fas fa-pencil-alt\"\n              />\n            </Form>\n            {this.renderCommentArea()}\n            {this.renderMembers()}\n            <div\n              className=\"participate-btn\"\n              onClick={(e) => this.participate(e)}\n            >\n              +\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      const style = {\n        position: \"relative\",\n      };\n\n      if (this.state.pic !== \"\") {\n        style.backgroundImage = `url(\"${this.state.pic}\")`;\n        style.height = \"40vh\";\n      } else {\n        style.backgroundImage = \"\";\n        style.height = \"10vh\";\n      }\n      return (\n        <div\n          className=\"task-page-container\"\n          style={{\n            width: this.props.overflowWidth,\n          }}\n        >\n          <div\n            className=\"task-overflow\"\n            style={{ width: this.props.overflowWidth }}\n          >\n            <div id=\"input\" style={style}></div>\n            <div className=\"task-page-name\">\n              {this.props.task.title.toUpperCase()}\n            </div>\n            <p className=\"task-page-desc\">\n              {this.props.task.description}\n              <a\n                className=\"task-page-link-inside\"\n                href={`${this.props.task.url}`}\n              >\n                <span></span>LINK\n              </a>\n              <span\n                className=\"task-page-date-inside\"\n                style={{\n                  color: \"#ff006e\",\n                  width: \"66vw\",\n                  height: \"3vh\",\n                  margin: \"1vh 0\",\n                }}\n              >\n                {this.state.deadline}{\" \"}\n              </span>\n            </p>\n            <div id=\"edit-date-form\">\n              {/* <div  id=\"date-timeInput\" \n            className=\"task-page-date\"\n            style={{color:\"#ff006e\", width:\"66vw\",height:\"3vh\",margin:\"1vh 0\"}}\n            >\n            {this.state.deadline}\n            </div> */}\n              <div\n                className=\"edit-date-form-p\"\n                style={{\n                  border: `solid .1px ${this.state.priority}`,\n                }}\n              >\n                {this.defaultPriority(this.state.priority)}\n              </div>\n            </div>\n            {this.renderCommentArea()}\n            {this.renderMembers()}\n          </div>\n        </div>\n      );\n    }\n  };\n  render() {\n    return (\n      <div\n        className=\"task-page\"\n        style={{\n          width: this.props.pageWidth,\n          left: this.props.pageLeft,\n          borderRadius: this.props.pageRadius,\n          alignItems: this.props.flexFlow,\n        }}\n      >\n        {this.renderPage()}\n      </div>\n    );\n  }\n}\n\nexport default TaskPage;\n"]},"metadata":{},"sourceType":"module"}