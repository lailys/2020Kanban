{"ast":null,"code":"var _jsxFileName = \"/Users/lailysarvarian/a-kanban/client/src/components/Task.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport opensocket from \"socket.io-client\";\nimport moment from \"moment\";\n\nclass Task extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      members: [],\n      deadline: \"\",\n      display: \"none\"\n    };\n\n    this.componentDidMount = () => {\n      console.log(this.props.task, \"+++++++++++\");\n      const socket = opensocket(\"http://localhost:8080\");\n      this.fetchMembers();\n      this.setState({\n        deadline: !this.props.task.deadline ? \"\" : moment(this.props.task.deadline).format(\"MMMM Do YYYY, HH:mm a \")\n      });\n      socket.on(\"taskMember\", data => {\n        if (data.action === \"create\") {\n          this.fetchMembers();\n        }\n      });\n    };\n\n    this.fetchMembers = () => {\n      fetch(`/task-members/${this.props.task._id}`, {\n        headers: {\n          Authorization: \"Bearer \"\n        }\n      }).then(res => {\n        return res.json();\n      }).then(result => {\n        this.setState({\n          members: result.members\n        });\n      });\n    };\n\n    this.imgRender = () => {\n      let all = [];\n\n      for (let i = 0; i < this.state.members.length; i++) {\n        const style = {\n          position: \"absolute\",\n          left: `${i * 2}vh`,\n          bottom: \".3vmin\",\n          color: \"white\"\n        };\n\n        if (this.state.members[i].pic) {\n          style.backgroundImage = `url(\"/${this.state.members[i].pic}\")`;\n        } else {\n          style.backgroundImage = \"none\";\n          style.backgroundColor = this.state.members[i].color;\n          style.color = \"white\";\n        }\n\n        console.log(this.state.members[i].pic, \"this.state.members[i].pic\", style);\n\n        if (style.backgroundImage !== \"#5f5f64b0\") {\n          all.push( /*#__PURE__*/React.createElement(\"div\", {\n            key: `img-${i}`,\n            className: \"task-img\",\n            style: style,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 11\n            }\n          }, !this.state.members[i].pic ? `${this.state.members[i].name.split(\" \")[0][0]}${this.state.members[i].name.split(\" \")[1][0]}` : \"\"));\n        } else {\n          all.push( /*#__PURE__*/React.createElement(\"div\", {\n            key: `img-${i}`,\n            className: \"task-img\",\n            style: style,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 13\n            }\n          }, !this.state.members[i].pic ? `${this.state.members[i].name.split(\" \")[0][0]}${this.state.members[i].name.split(\" \")[1][0]}` : \"\")));\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"members-container-user-page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 12\n        }\n      }, all);\n    };\n\n    this.renderRemove = () => {\n      return this.props.token ? /*#__PURE__*/React.createElement(\"span\", {\n        id: \"user-page-span\",\n        onClick: e => this.props.removeTask(e, this.props.task.team, this.props.task._id, this.props.task.stage, this.props.position),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      }, \"-\") : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      });\n    };\n\n    this.displayModal = e => {\n      this.state.display === \"flex\" ? this.setState({\n        display: \"none\"\n      }) : this.setState({\n        display: \"flex\"\n      });\n    };\n\n    this.removeTask = e => {\n      if (this.props.token) {\n        fetch(`http://localhost:8080/tasks/${this.props.id}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: \"Bearer \" + this.props.token,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            user: localStorage.getItem(\"userId\"),\n            team: this.props.task.team,\n            task: this.props.id,\n            stage: this.props.task.stage,\n            i: this.props.position\n          })\n        }).then(result => {\n          return result.json();\n        }).then(res => {\n          if (!res.done) {\n            alert(res.message);\n          }\n        });\n      } else {\n        this.props.history.push(\"/login\");\n      }\n    };\n  }\n\n  render() {\n    const style = {};\n\n    if (this.props.location1 === \"top\") {\n      style.opacity = this.props.opacity;\n      style.marginBottom = \".3vh\";\n      style.marginLeft = \".1vw\";\n      style.width = \"20vw\"; // style.minHeight = \"16vh\";\n\n      style.height = \"26%\";\n    } else {\n      style.margin = \"0 .5vh\";\n      style.width = \"20%\";\n      style.height = \"80%\";\n    }\n\n    return (\n      /*#__PURE__*/\n      // this.props.page!==\"teamPage\"? (\n      React.createElement(\"div\", {\n        className: \"task-cube-user-page\",\n        id: `id-${this.props.id}+${this.props.position}`,\n        style: style,\n        index: \"yes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"task-cube-priority\",\n        onClick: e => this.displayModal(e),\n        style: {\n          backgroundColor: this.props.task.priority\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"task-title-user-page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }\n      }, this.props.task.title.toUpperCase()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"task-cube-middle-user-page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        id: \"link\",\n        className: \"fas fa-question\",\n        to: `/${this.props.team.title}/${this.props.task._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"member-count\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"member-sign\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-user-friends\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"count\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }\n      }, this.props.task.responders.length)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"deadline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-clock\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }\n      }, this.state.deadline === \"invalid date\" ? \"\" : this.state.deadline))), this.imgRender(), this.props.user._id === this.props.userId ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-content\",\n        style: {\n          backgroundColor: this.props.task.priority,\n          color: \"white\",\n          display: this.state.display\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        onClick: e => this.displayModal(e),\n        className: \"close\",\n        style: {\n          backgroundColor: this.props.task.priority\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }\n      }, \"Are you sure you want to delete?\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"task-page-remove-task\",\n        onClick: e => this.removeTask(e),\n        style: {\n          color: this.props.task.priority\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }\n      }, \"-\")) : /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          background: \"none\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }))\n    );\n  }\n\n}\n\nexport default Task;","map":{"version":3,"sources":["/Users/lailysarvarian/a-kanban/client/src/components/Task.js"],"names":["React","Component","Link","opensocket","moment","Task","state","members","deadline","display","componentDidMount","console","log","props","task","socket","fetchMembers","setState","format","on","data","action","fetch","_id","headers","Authorization","then","res","json","result","imgRender","all","i","length","style","position","left","bottom","color","pic","backgroundImage","backgroundColor","push","name","split","renderRemove","token","e","removeTask","team","stage","displayModal","id","method","body","JSON","stringify","user","localStorage","getItem","done","alert","message","history","render","location1","opacity","marginBottom","marginLeft","width","height","margin","priority","title","toUpperCase","responders","userId","background"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport opensocket from \"socket.io-client\";\nimport moment from \"moment\";\n\nclass Task extends Component {\n  state = {\n    members: [],\n    deadline: \"\",\n    display: \"none\",\n  };\n  componentDidMount = () => {\n    console.log(this.props.task,\"+++++++++++\")\n    const socket = opensocket(\"http://localhost:8080\");\n    this.fetchMembers();\n    this.setState({\n      deadline: !this.props.task.deadline\n        ? \"\"\n        : moment(this.props.task.deadline).format(\"MMMM Do YYYY, HH:mm a \"),\n    });\n    socket.on(\"taskMember\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchMembers();\n      }\n    });\n  };\n  fetchMembers = () => {\n    fetch(`/task-members/${this.props.task._id}`, {\n      headers: {\n        Authorization: \"Bearer \",\n      },\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then((result) => {\n        this.setState({ members: result.members });\n      });\n  };\n  imgRender = () => {\n    let all = [];\n\n    for (let i = 0; i < this.state.members.length; i++) {\n      const style = {\n        position: \"absolute\",\n        left: `${i * 2}vh`,\n        bottom: \".3vmin\",\n        color:\"white\"\n      };\n      \n      if (this.state.members[i].pic) {\n        style.backgroundImage = `url(\"/${this.state.members[i].pic}\")`;\n      } else {\n        style.backgroundImage = \"none\";\n        style.backgroundColor = this.state.members[i].color;\n        style.color = \"white\";\n      }\n      console.log(this.state.members[i].pic,\"this.state.members[i].pic\",style)\n      if (style.backgroundImage !== \"#5f5f64b0\") {\n        all.push(\n          <div key={`img-${i}`} className=\"task-img\" style={style}>\n            \n            {!this.state.members[i].pic\n              ? `${this.state.members[i].name.split(\" \")[0][0]}${\n                  this.state.members[i].name.split(\" \")[1][0]\n                }`\n              : \"\"}\n          </div>\n        );\n      } else {\n        all.push(\n          <div key={`img-${i}`} className=\"task-img\" style={style}>\n            <div>\n              \n              {!this.state.members[i].pic\n                ? `${this.state.members[i].name.split(\" \")[0][0]}${\n                    this.state.members[i].name.split(\" \")[1][0]\n                  }`\n                : \"\"}\n            </div>\n          </div>\n        );\n      }\n    }\n    return <div className=\"members-container-user-page\">{all}</div>;\n  };\n  renderRemove = () => {\n    return this.props.token ? (\n      <span\n        id=\"user-page-span\"\n        onClick={(e) =>\n          this.props.removeTask(\n            e,\n            this.props.task.team,\n            this.props.task._id,\n            this.props.task.stage,\n            this.props.position\n          )\n        }\n      >\n        -\n      </span>\n    ) : (\n      <span></span>\n    );\n  };\n  displayModal = (e) => {\n    this.state.display === \"flex\"\n      ? this.setState({ display: \"none\" })\n      : this.setState({ display: \"flex\" });\n  };\n  removeTask = (e) => {\n    if (this.props.token) {\n      fetch(`http://localhost:8080/tasks/${this.props.id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: \"Bearer \" + this.props.token,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          user: localStorage.getItem(\"userId\"),\n          team: this.props.task.team,\n          task: this.props.id,\n          stage: this.props.task.stage,\n          i: this.props.position,\n        }),\n      })\n        .then((result) => {\n          return result.json();\n        })\n        .then((res) => {\n          if (!res.done) {\n            alert(res.message);\n          }\n        });\n    } else {\n      this.props.history.push(\"/login\");\n    }\n  };\n  render() {\n    const style = {};\n    if (this.props.location1 === \"top\") {\n      style.opacity=this.props.opacity\n      style.marginBottom = \".3vh\";\n      style.marginLeft = \".1vw\";\n      style.width = \"20vw\";\n      // style.minHeight = \"16vh\";\n      style.height = \"26%\";\n    } else {\n      style.margin = \"0 .5vh\";\n      style.width = \"20%\";\n      style.height = \"80%\";\n    }\n\n\n    return (\n      // this.props.page!==\"teamPage\"? (\n        <div\n          className=\"task-cube-user-page\"\n          id={`id-${this.props.id}+${this.props.position}`}\n          style={style}\n          index=\"yes\"\n        >\n          <div\n            className=\"task-cube-priority\"\n            onClick={(e) => this.displayModal(e)}\n            style={{ backgroundColor: this.props.task.priority }}\n          ></div>\n          <div className=\"task-title-user-page\">\n            {this.props.task.title.toUpperCase()}\n          </div>\n          <div className=\"task-cube-middle-user-page\">\n            <Link\n              id=\"link\"\n              className=\"fas fa-question\"\n              to={`/${this.props.team.title}/${this.props.task._id}`}\n            ></Link>\n            <div className=\"member-count\">\n              <div className=\"member-sign\">\n                <i className=\"fas fa-user-friends\"></i>\n              </div>\n              <div className=\"count\">{this.props.task.responders.length}</div>\n            </div>\n            <div className=\"deadline\">\n              <i className=\"fas fa-clock\"></i>\n              <div className=\"time\">\n                {this.state.deadline === \"invalid date\"\n                  ? \"\"\n                  : this.state.deadline}\n              </div>\n            </div>\n          </div>\n  \n          {this.imgRender()}\n              {this.props.user._id===this.props.userId?\n            <div\n            className=\"modal-content\"\n            style={{\n              backgroundColor: this.props.task.priority,\n              color: \"white\",\n              display: this.state.display,\n            }}\n          >\n            <span\n              onClick={(e) => this.displayModal(e)}\n              className=\"close\"\n              style={{\n                backgroundColor: this.props.task.priority,\n              }}\n            >\n              &times;\n            </span>\n            <div className=\"modal-text\">Are you sure you want to delete?</div>\n            <div\n              id=\"task-page-remove-task\"\n              onClick={(e) => this.removeTask(e)}\n              style={{ color: this.props.task.priority }}\n            >\n              -\n            </div>\n          </div>:\n          <div style={{background:\"none\"}}></div>\n          }\n        </div>\n     \n      )\n    \n  }\n}\n\n\nexport default Task;\n\n"]},"metadata":{},"sourceType":"module"}