{"ast":null,"code":"import _classCallCheck from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";var LoginPage=/*#__PURE__*/function(_Component){_inherits(LoginPage,_Component);var _super=_createSuper(LoginPage);function LoginPage(){var _this;_classCallCheck(this,LoginPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={authentication:{},message:\"\"};_this.renderPage=function(){if(!_this.props.token){if(_this.props.link===\"login\"){return/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-page-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-title\"},\"LOGIN\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this.login,className:\"login-form\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"email\",type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"password\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/React.createElement(Link,{to:\"/password-Update-request\",className:\"change-password\"},\"Forgot your password?\"),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"login-page-login-btn\"},\"LOGIN\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{onClick:function onClick(e){return _this.props.authPicker(e);},className:\"header-link login-page-signup-btn\",id:\"signup\",to:\"/signup\"},\"SIGNUP\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)),_this.message()));}else if(_this.props.link===\"signup\"){return/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\",style:{display:\"\".concat(_this.props.display)}},/*#__PURE__*/React.createElement(\"div\",{className:\"login-page-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-title\"},\"SIGNUP\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this.signup,className:\"signup-form\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"name\",type:\"text\",placeholder:\"Name\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"email\",type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"password\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"confirmPassword\",type:\"password\",placeholder:\"Confirm Password\",required:true}),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"have-account\",id:\"login\",onClick:function onClick(e){return _this.props.authPicker(e);}},\"Already have an account?\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"login-page-login-btn\"},\"SIGNUP\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)),_this.message()));}else if(_this.props.link===\"passwordUpdateReq\"){return/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-page-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"password-update-title\"},\"UPDATE PASSWORD REQUEST\"),/*#__PURE__*/React.createElement(\"form\",{className:\"password-update-form\",onSubmit:_this.requestFor},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"email\",type:\"text\",placeholder:\"Email\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"password-update-btn\",type:\"submit\"},\"SUBMIT\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"back-login-btn\"},\" \",\"LOGIN\")),_this.message()));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"login-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"password-update-request\"},/*#__PURE__*/React.createElement(\"div\",{className:\"password-update-title\"},\"UPDATE PASSWORD\"),/*#__PURE__*/React.createElement(\"form\",{className:\"password-update-form\",onSubmit:_this.requestSubmit},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"password\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return _this.createAcount(e);},id:\"confirmPassword\",type:\"password\",placeholder:\"Confirm Password\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"password-update-btn\",type:\"submit\"},\"SUBMIT\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"back-login-btn\"},\" \",\"LOGIN\")),_this.message()));}}else{_this.props.history.push(\"/\");}};_this.logout=function(e){e.preventDefault();localStorage.clear();};_this.createAcount=function(e){var authentication=Object.assign({},_this.state.authentication);authentication[e.target.id]=e.target.value;_this.setState({authentication:authentication});};_this.signup=function(e){e.preventDefault();var color=\"hsla(\".concat(~~(360*Math.random()),\",94%,70%,.8)\");fetch(\"http://localhost:8080/users\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:_this.state.authentication.name,email:_this.state.authentication.email,password:_this.state.authentication.password,confirmPassword:_this.state.authentication.confirmPassword,color:color})}).then(function(result){return result.json();}).then(function(res){if(res.user){_this.props.history.push(\"/login\");}else{_this.setState({message:res.data});}});};_this.login=function(e){e.preventDefault();fetch(\"http://localhost:8080/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:_this.state.authentication.email,password:_this.state.authentication.password})}).then(function(result){return result.json();}).then(function(res){if(res.err){_this.setState({message:res.err});}else{_this.props.authChange(res._id,res.token);localStorage.setItem(\"token\",res.token);localStorage.setItem(\"userId\",res._id);var remainingMilliseconds=60*60*1000;var expiryDate=new Date(new Date().getTime()+remainingMilliseconds);localStorage.setItem(\"expiryDate\",expiryDate.toISOString());_this.setAutoLogout(remainingMilliseconds);_this.props.history.push(\"/\");}});};_this.setAutoLogout=function(milliseconds){setTimeout(function(){_this.logoutHandler();},milliseconds);};_this.message=function(){var all=[];if(_this.state.message.length>0){_this.state.message.map(function(each,i){all.push(/*#__PURE__*/React.createElement(\"div\",{key:i},each.msg));});}return/*#__PURE__*/React.createElement(\"div\",{id:\"message\"},\" \",all);};_this.requestFor=function(e){e.preventDefault();fetch(\"http://localhost:8080/update-pass-request\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:_this.state.authentication.email})}).then(function(result){return result.json();}).then(function(res){if(!res.err){_this.props.setToken(res.token);_this.setState({message:[{value:\"follow email\",msg:\"please check your email\"}],authentication:{email:\"\"}});}else{_this.setState({message:res.err});}});};_this.requestSubmit=function(e){e.preventDefault();fetch(\"http://localhost:8080/update-pass/\".concat(_this.props.history.location.pathname.split(\"/\")[2]),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:_this.state.authentication.password,confirmPassword:_this.state.authentication.confirmPassword})}).then(function(result){return result.json();}).then(function(res){if(res.user){_this.props.history.push(\"/login\");}else{_this.setState({message:res.err});}});};return _this;}_createClass(LoginPage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.renderPage());}}]);return LoginPage;}(Component);export default LoginPage;","map":{"version":3,"sources":["/Users/lailysarvarian/a-kanban/client/src/components/LoginPage.js"],"names":["React","Component","Link","LoginPage","state","authentication","message","renderPage","props","token","link","login","e","createAcount","authPicker","display","signup","requestFor","requestSubmit","history","push","logout","preventDefault","localStorage","clear","Object","assign","target","id","value","setState","color","Math","random","fetch","method","headers","body","JSON","stringify","name","email","password","confirmPassword","then","result","json","res","user","data","err","authChange","_id","setItem","remainingMilliseconds","expiryDate","Date","getTime","toISOString","setAutoLogout","milliseconds","setTimeout","logoutHandler","all","length","map","each","i","msg","setToken","location","pathname","split"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass LoginPage extends Component {\n  state = {\n    authentication: {},\n    message: \"\",\n  };\n  renderPage = () => {\n    if (!this.props.token) {\n      if (this.props.link === \"login\") {\n        return (\n          <div className=\"login-page\">\n            <div className=\"login-page-form\">\n              <div className=\"login-title\">LOGIN</div>\n              <form onSubmit={this.login} className=\"login-form\">\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                />\n                <br />\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                />\n                <Link to=\"/password-Update-request\" className=\"change-password\">\n                  Forgot your password?\n                </Link>\n                <button type=\"submit\" className=\"login-page-login-btn\">\n                  LOGIN\n                </button>\n                <br />\n               \n                <Link\n                  onClick={(e) => this.props.authPicker(e)}\n                  className=\"header-link login-page-signup-btn\"\n                  id=\"signup\"\n                  to=\"/signup\"\n                >\n                  SIGNUP\n                </Link>\n                <br />\n                <br />\n                <br />\n                <br />\n              </form>\n              {this.message()}\n            </div>\n          </div>\n        );\n      } else if (this.props.link === \"signup\") {\n        return (\n          <div\n            className=\"login-page\"\n            style={{ display: `${this.props.display}` }}\n          >\n            <div className=\"login-page-form\">\n              <div className=\"login-title\">SIGNUP</div>\n              <form onSubmit={this.signup} className=\"signup-form\">\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"name\"\n                  type=\"text\"\n                  placeholder=\"Name\"\n                />\n                <br />\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                />\n                <br />\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                />\n                <br />\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                  required\n                />\n                <Link\n                  to=\"/login\"\n                  className=\"have-account\"\n                  id=\"login\"\n                  onClick={(e) => this.props.authPicker(e)}\n                >\n                  Already have an account?\n                </Link>\n                <br />\n                <button type=\"submit\" className=\"login-page-login-btn\">\n                  SIGNUP\n                </button>\n                <br />\n                <br />\n              </form>\n              {this.message()}\n            </div>\n          </div>\n        );\n      } else if (this.props.link === \"passwordUpdateReq\") {\n        return (\n          <div className=\"login-page\">\n            <div className=\"login-page-form\">\n              <div className=\"password-update-title\">\n                UPDATE PASSWORD REQUEST\n              </div>\n              <form className=\"password-update-form\" onSubmit={this.requestFor}>\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"email\"\n                  type=\"text\"\n                  placeholder=\"Email\"\n                />\n                <br />\n                <br />\n                <br />\n                <button className=\"password-update-btn\" type=\"submit\">\n                  SUBMIT\n                </button>\n                <br />\n                <Link to=\"/login\" className=\"back-login-btn\">\n                  {\" \"}\n                  LOGIN\n                </Link>\n              </form>\n              {this.message()}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"login-page\">\n            <div className=\"password-update-request\">\n              <div className=\"password-update-title\">UPDATE PASSWORD</div>\n              <form\n                className=\"password-update-form\"\n                onSubmit={this.requestSubmit}\n              >\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                />\n                <br />\n                <input\n                  onChange={(e) => this.createAcount(e)}\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                  required\n                />\n                <br />\n                <br />\n                <br />\n                <button className=\"password-update-btn\" type=\"submit\">\n                  SUBMIT\n                </button>\n                <br />\n                <Link to=\"/login\" className=\"back-login-btn\">\n                  {\" \"}\n                  LOGIN\n                </Link>\n              </form>\n              {this.message()}\n            </div>\n          </div>\n        );\n      }\n    } else {\n      this.props.history.push(\"/\");\n    }\n  };\n  logout = (e) => {\n    e.preventDefault();\n    localStorage.clear();\n  };\n  createAcount = (e) => {\n    let authentication = Object.assign({}, this.state.authentication);\n    authentication[e.target.id] = e.target.value;\n    this.setState({ authentication });\n  };\n  signup = (e) => {\n    e.preventDefault();\n    const color = `hsla(${~~(360 * Math.random())},94%,70%,.8)`;\n    fetch(`http://localhost:8080/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: this.state.authentication.name,\n        email: this.state.authentication.email,\n        password: this.state.authentication.password,\n        confirmPassword: this.state.authentication.confirmPassword,\n        color: color,\n      }),\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((res) => {\n        if (res.user) {\n          this.props.history.push(\"/login\");\n        } else {\n          this.setState({ message: res.data });\n        }\n      });\n  };\n  login = (e) => {\n    e.preventDefault();\n    fetch(`http://localhost:8080/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: this.state.authentication.email,\n        password: this.state.authentication.password,\n      }),\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((res) => {\n        if (res.err) {\n          this.setState({ message: res.err });\n        } else {\n          this.props.authChange(res._id, res.token);\n          localStorage.setItem(\"token\", res.token);\n          localStorage.setItem(\"userId\", res._id);\n          const remainingMilliseconds = 60 * 60 * 1000;\n          const expiryDate = new Date(\n            new Date().getTime() + remainingMilliseconds\n          );\n          localStorage.setItem(\"expiryDate\", expiryDate.toISOString());\n          this.setAutoLogout(remainingMilliseconds);\n          this.props.history.push(\"/\");\n        }\n      });\n  };\n  setAutoLogout = (milliseconds) => {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  };\n\n  message = () => {\n    let all = [];\n    if (this.state.message.length > 0) {\n      this.state.message.map((each, i) => {\n        all.push(<div key={i}>{each.msg}</div>);\n      });\n    }\n    return <div id=\"message\"> {all}</div>;\n  };\n  requestFor = (e) => {\n    e.preventDefault();\n    fetch(`http://localhost:8080/update-pass-request`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: this.state.authentication.email,\n      }),\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((res) => {\n        if (!res.err) {\n          this.props.setToken(res.token);\n          this.setState({\n            message: [\n              { value: \"follow email\", msg: \"please check your email\" },\n            ],\n            authentication: { email: \"\" },\n          });\n        } else {\n          this.setState({ message: res.err });\n        }\n      });\n  };\n  requestSubmit = (e) => {\n    e.preventDefault();\n    fetch(\n      `http://localhost:8080/update-pass/${\n        this.props.history.location.pathname.split(\"/\")[2]\n      }`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          password: this.state.authentication.password,\n          confirmPassword: this.state.authentication.confirmPassword,\n        }),\n      }\n    )\n      .then((result) => {\n        return result.json();\n      })\n      .then((res) => {\n        if (res.user) {\n          this.props.history.push(\"/login\");\n        } else {\n          this.setState({ message: res.err });\n        }\n      });\n  };\n  render() {\n    return <div>{this.renderPage()}</div>;\n  }\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}