{"ast":null,"code":"import _defineProperty from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import opensocket from\"socket.io-client\";import{DragDropContext}from\"react-dnd\";import HTML5Backend from\"react-dnd-html5-backend\";import Container from\"./Container\";import AddTasks from\"./AddTasks\";import Task from\"./Task\";import Search from\"./Search\";var TeamPage=/*#__PURE__*/function(_Component){_inherits(TeamPage,_Component);var _super=_createSuper(TeamPage);function TeamPage(){var _this;_classCallCheck(this,TeamPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={boards:[\"REQUESTED\",\"INPROGRESS\",\"DONE\",\"TRASH\"],displayTask:\"none\",display:\"flex\",priority:\"\",opacity:\"1\",newTask:{priority:\"#0aa7f5\",stage:\"REQUESTED\"},teamTasks:{},dragged:{},draggedfrom:{},sign:{REQUESTED:\"fas fa-sort-up\",INPROGRESS:\"fas fa-sort-up\",DONE:\"fas fa-sort-up\"},date:\"\",time:\"\",dateTime:\"\",datesRange:\"\",selectedOption:null};_this.componentDidMount=function(){_this.fetchTasks(\"na\",\"na\");var socket=opensocket(\"http://localhost:8080\");socket.on(\"task\",function(data){if(data.action===\"create\"){_this.fetchTasks(\"na\",\"na\");}});socket.on(\"taskChange\",function(data){if(data.action===\"create\"){_this.fetchTasks(\"na\",\"na\");}});};_this.fetchTasks=function(priority,i){fetch(\"/team/tasks-\".concat(_this.props.team._id,\"-\").concat(i,\"-\").concat(priority)).then(function(res){return res.json();}).then(function(result){_this.setState({teamTasks:result.tasks});});};_this.handleChange=function(e,_ref){var name=_ref.name,value=_ref.value;_this.setState(_defineProperty({},name,value));};_this.search=function(e){};_this.submitTask=function(e){e.preventDefault();_this.setState({display:\"flex\"});if(_this.props.token){fetch(\"/tasks\",{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({title:_this.state.newTask.title,description:_this.state.newTask.description,creator:_this.props.user,priority:_this.state.newTask.priority,responder:[],url:_this.state.newTask.url||\"\",stage:_this.state.newTask.stage,datetime:_this.state.dateTime||\"\",team:_this.props.team})}).then(function(result){return result.json();}).then(function(message){if(message.done){_this.setState({displayTask:\"none\",newTask:{title:\"\",description:\"\",url:\"\",priority:\"#priority\",stage:\"REQUESTED\"}});}else{alert(message.message);}});}else{_this.props.history.push(\"/login\");}};_this.closeTask=function(e){_this.setState({displayTask:\"none\",display:\"flex\"});};_this.createTask=function(e){var newTask=Object.assign({},_this.state.newTask);newTask[e.target.id]=e.target.value;_this.setState({newTask:newTask});_this.setState({newTask:newTask});};_this.requestTasks=function(e){_this.props.teamPageDisplaySwitch(\"none\");_this.props.movePage(\"close\");if(_this.props.token){_this.state.displayTask===\"none\"?_this.setState({displayTask:\"flex\",display:\"none\"}):_this.setState({displayTask:\"none\",display:\"flex\"});}else{_this.props.history.push(\"/login\");}};return _this;}_createClass(TeamPage,[{key:\"render\",value:function render(){var _this2=this;var REQ=this.state.teamTasks.REQUESTED;var PROG=this.state.teamTasks.INPROGRESS;var DONE=this.state.teamTasks.DONE;return/*#__PURE__*/React.createElement(\"div\",{className:\"each-page\",style:{width:this.props.pageWidth,left:this.props.pageLeft}},/*#__PURE__*/React.createElement(\"div\",{className:\"team-title\"},this.props.team.title.toUpperCase()),/*#__PURE__*/React.createElement(\"div\",{style:{display:this.state.display}},/*#__PURE__*/React.createElement(Container,{key:\"Container-\".concat(0),name:\"REQUESTED\",className:\"REQUESTED\",id:0,i:\"REQUESTED\",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign[\"REQUESTED\"],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity// location1=\"top\"\n// location2=\"left\"\n// location2Digit=\".5vw\"\n// unit=\"vh\"\n,history:this.props.history}),/*#__PURE__*/React.createElement(Container,{key:\"Container-\".concat(1),name:\"INPROGRESS\",className:\"INPROGRESS\",id:1,i:\"INPROGRESS\",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign[\"INPROGRESS\"],tasks:PROG||[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history}),/*#__PURE__*/React.createElement(Container,{key:\"Container-\".concat(2),name:\"DONE\",className:\"DONE\",id:2,i:\"DONE\",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign[\"DONE\"],tasks:DONE||[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history}),/*#__PURE__*/React.createElement(Container,{key:\"Container-\".concat(3),name:\"TRASH\",className:\"TRASH\",id:3,i:\"TRASH\",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign[\"DONE\"],tasks:[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history})),this.props.token?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\",id:\"add-task-btn\",onClick:function onClick(e){return _this2.requestTasks(e);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"team-title\"},this.props.team.title.toUpperCase()),/*#__PURE__*/React.createElement(AddTasks,{displayTask:this.state.displayTask,createTask:this.createTask,handleChange:this.handleChange,date:this.state.date,dateTime:this.state.dateTime,priority:this.priority,submitTask:this.submitTask,closeTask:this.closeTask,newTask:this.state.newTask,taskWidth:this.props.taskWidth})):/*#__PURE__*/React.createElement(\"div\",null));}}]);return TeamPage;}(Component);export default DragDropContext(HTML5Backend)(TeamPage);","map":{"version":3,"sources":["/Users/lailysarvarian/a-kanban/client/src/components/TeamPage.js"],"names":["React","Component","opensocket","DragDropContext","HTML5Backend","Container","AddTasks","Task","Search","TeamPage","state","boards","displayTask","display","priority","opacity","newTask","stage","teamTasks","dragged","draggedfrom","sign","REQUESTED","INPROGRESS","DONE","date","time","dateTime","datesRange","selectedOption","componentDidMount","fetchTasks","socket","on","data","action","i","fetch","props","team","_id","then","res","json","result","setState","tasks","handleChange","e","name","value","search","submitTask","preventDefault","token","method","headers","Authorization","body","JSON","stringify","title","description","creator","user","responder","url","datetime","message","done","alert","history","push","closeTask","createTask","Object","assign","target","id","requestTasks","teamPageDisplaySwitch","movePage","REQ","PROG","width","pageWidth","left","pageLeft","toUpperCase","sortOptions","renderTasks","taskWidth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport opensocket from \"socket.io-client\";\nimport { DragDropContext } from \"react-dnd\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport Container from \"./Container\";\nimport AddTasks from \"./AddTasks\";\nimport Task from \"./Task\";\nimport Search from \"./Search\";\n\nclass TeamPage extends Component {\n  state = {\n    boards: [\"REQUESTED\", \"INPROGRESS\", \"DONE\", \"TRASH\"],\n    displayTask: \"none\",\n    display: \"flex\",\n    priority: \"\",\n    opacity: \"1\",\n    newTask: { priority: \"#0aa7f5\", stage: \"REQUESTED\" },\n    teamTasks: {},\n    dragged: {},\n    draggedfrom: {},\n    sign: {\n      REQUESTED: \"fas fa-sort-up\",\n      INPROGRESS: \"fas fa-sort-up\",\n      DONE: \"fas fa-sort-up\",\n    },\n    date: \"\",\n    time: \"\",\n    dateTime: \"\",\n    datesRange: \"\",\n    selectedOption: null,\n  };\n  componentDidMount = () => {\n    this.fetchTasks(\"na\",\"na\");\n    const socket = opensocket(\"http://localhost:8080\");\n    socket.on(\"task\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchTasks(\"na\",\"na\");\n      }\n    });\n    socket.on(\"taskChange\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchTasks(\"na\",\"na\");\n      }\n    });\n  };\n  fetchTasks = (priority, i) => {\n    fetch(\n      `/team/tasks-${this.props.team._id}-${i}-${priority}`\n    )\n      .then((res) => {\n        return res.json();\n      })\n      .then((result) => {\n        this.setState({ teamTasks: result.tasks });\n      });\n  };\n\n  handleChange = (e, { name, value }) => {\n    this.setState({ [name]: value });\n  };\n  search = (e) => {};\n\n  submitTask = (e) => {\n    e.preventDefault();\n    this.setState({ display: \"flex\" });\n    if (this.props.token) {\n      fetch(\"/tasks\", {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + this.props.token,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          title: this.state.newTask.title,\n          description: this.state.newTask.description,\n          creator: this.props.user,\n          priority: this.state.newTask.priority,\n          responder: [],\n          url: this.state.newTask.url || \"\",\n          stage: this.state.newTask.stage,\n          datetime: this.state.dateTime || \"\",\n          team: this.props.team,\n        }),\n      })\n        .then((result) => {\n          return result.json();\n        })\n        .then((message) => {\n          if (message.done) {\n            this.setState({\n              displayTask: \"none\",\n              newTask: {\n                title: \"\",\n                description: \"\",\n                url: \"\",\n                priority: \"#priority\",\n                stage: \"REQUESTED\",\n              },\n            });\n          } else {\n            alert(message.message);\n          }\n        });\n    } else {\n      this.props.history.push(\"/login\");\n    }\n  };\n  closeTask = (e) => {\n    this.setState({ displayTask: \"none\", display: \"flex\" });\n  };\n  createTask = (e) => {\n    let newTask = Object.assign({}, this.state.newTask);\n    newTask[e.target.id] = e.target.value;\n    this.setState({ newTask: newTask });\n    this.setState({\n      newTask,\n    });\n  };\n  requestTasks = (e) => {\n    this.props.teamPageDisplaySwitch(\"none\");\n    this.props.movePage(\"close\");\n    if (this.props.token) {\n      this.state.displayTask === \"none\"\n        ? this.setState({ displayTask: \"flex\", display: \"none\" })\n        : this.setState({ displayTask: \"none\", display: \"flex\" });\n    } else {\n      this.props.history.push(\"/login\");\n    }\n  };\n  render() {\n    const REQ = this.state.teamTasks.REQUESTED;\n    const PROG = this.state.teamTasks.INPROGRESS;\n    const DONE = this.state.teamTasks.DONE;\n    return (\n        <div\n          className=\"each-page\"\n          style={{ width: this.props.pageWidth, left: this.props.pageLeft }}\n        >\n            <div className=\"team-title\">\n            {this.props.team.title.toUpperCase()}\n          </div>\n          <div style={{ display: this.state.display }}>\n          <Container\n            key={`Container-${0}`}\n            name={\"REQUESTED\"}\n            className={\"REQUESTED\"}\n            id={0}\n            i={\"REQUESTED\"}\n            team={this.props.team}\n            token={this.props.token}\n            user={this.props.user}\n            display={this.state.display}\n            sortOptions={this.state.sortOptions}\n            sign={this.state.sign[\"REQUESTED\"]}\n            requestTasks={this.requestTasks}\n            renderTasks={this.renderTasks}\n            opacity={this.state.opacity}\n            // location1=\"top\"\n            // location2=\"left\"\n            // location2Digit=\".5vw\"\n            // unit=\"vh\"\n            history={this.props.history}\n          />\n          <Container\n            key={`Container-${1}`}\n            name={\"INPROGRESS\"}\n            className={\"INPROGRESS\"}\n            id={1}\n            i={\"INPROGRESS\"}\n            team={this.props.team}\n            token={this.props.token}\n            user={this.props.user}\n            display={this.state.display}\n            sortOptions={this.state.sortOptions}\n            sign={this.state.sign[\"INPROGRESS\"]}\n            tasks={PROG || []}\n           requestTasks={this.requestTasks}\n            renderTasks={this.renderTasks}\n            opacity={this.state.opacity}\n            history={this.props.history}\n          />\n          <Container\n            key={`Container-${2}`}\n            name={\"DONE\"}\n            className={\"DONE\"}\n            id={2}\n            i={\"DONE\"}\n            team={this.props.team}\n            token={this.props.token}\n            user={this.props.user}\n            display={this.state.display}\n            sortOptions={this.state.sortOptions}\n            sign={this.state.sign[\"DONE\"]}\n            tasks={DONE || []}\n           requestTasks={this.requestTasks}\n            renderTasks={this.renderTasks}\n            opacity={this.state.opacity}\n            history={this.props.history}\n          />\n          <Container\n            key={`Container-${3}`}\n            name={\"TRASH\"}\n            className={\"TRASH\"}\n            id={3}\n            i={\"TRASH\"}\n            team={this.props.team}\n            token={this.props.token}\n            user={this.props.user}\n            display={this.state.display}\n            sortOptions={this.state.sortOptions}\n            sign={this.state.sign[\"DONE\"]}\n            tasks={[]}\n            requestTasks={this.requestTasks}\n            renderTasks={this.renderTasks}\n            opacity={this.state.opacity}\n            history={this.props.history}\n          />\n             </div>\n          {this.props.token ? (\n            <div>\n              <i\n                className=\"fas fa-plus\"\n                id=\"add-task-btn\"\n                onClick={(e) => this.requestTasks(e)}\n              />\n              <div className=\"team-title\">\n                {this.props.team.title.toUpperCase()}\n              </div>\n              <AddTasks\n                displayTask={this.state.displayTask}\n                createTask={this.createTask}\n                handleChange={this.handleChange}\n                date={this.state.date}\n                dateTime={this.state.dateTime}\n                priority={this.priority}\n                submitTask={this.submitTask}\n                closeTask={this.closeTask}\n                newTask={this.state.newTask}\n                taskWidth={this.props.taskWidth}\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n     \n      </div>\n    );\n  }\n}\nexport default DragDropContext(HTML5Backend)(TeamPage);\n"]},"metadata":{},"sourceType":"module"}