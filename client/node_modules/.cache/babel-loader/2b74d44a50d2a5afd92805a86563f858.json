{"ast":null,"code":"import _classCallCheck from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lailysarvarian/a-kanban/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import opensocket from\"socket.io-client\";import Task from\"./Task\";var UserPage=/*#__PURE__*/function(_Component){_inherits(UserPage,_Component);var _super=_createSuper(UserPage);function UserPage(){var _this;_classCallCheck(this,UserPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{},responded:[],requested:[],pic:\"\",image:{}};_this.componentDidMount=function(){_this.fetchUserInfo();if(_this.props.user.pic===\"\"){_this.setState({pic:\"\",user:_this.props.user});}else{_this.setState({pic:\"/\".concat(_this.props.user.pic),user:_this.props.user});}var socket=opensocket(\"http://localhost:8080\");socket.on(\"task\",function(data){if(data.action===\"create\"){_this.fetchUserInfo();// this.props.fetchUsers();\n}});socket.on(\"taskChange\",function(data){if(data.action===\"create\"){_this.fetchUserInfo();// this.props.fetchUsers();\n}});socket.on(\"taskChange\",function(data){if(data.action===\"create\"){_this.fetchUserInfo();// this.props.fetchUsers();\n}});socket.on(\"taskMember\",function(data){if(data.action===\"create\"||data.action===\"delete\"){_this.fetchUserInfo();// this.props.fetchUsers();\n}});socket.on(\"userImg\",function(data){if(data.action===\"create\"){_this.fetchUserInfo();// this.props.fetchUsers();\n// this.setState({\n//   pic: `http://localhost:8080/${data}`,\n// });\n}});};_this.fetchUserInfo=function(){fetch(\"/user/\".concat(_this.props.user._id)).then(function(res){return res.json();}).then(function(result){console.log(result,\"yserpage\");_this.setState({user:result.user,responded:result.user.responded,requested:result.user.requested});});};_this.createimg=function(e){e.preventDefault();var file=e.target.files[0];_this.setState({pic:URL.createObjectURL(file)});var image=Object.assign({},_this.state.image);image[e.target.id]=e.target.files[0];_this.setState({image:image});};_this.renderRequested=function(){console.log(_this.state.user,\"yserpage555\");var all=[];if(_this.state.requested.length>0){_this.state.requested.map(function(task,i){var team={title:task.teamName};all.push(/*#__PURE__*/React.createElement(Task,{userId:_this.props.userId,user:_this.props.user,taskId:\"\".concat(task.stage,\"-\").concat(task._id,\"+\").concat(i),token:_this.props.token,id:task._id,key:\"Task-\".concat(i),task:task,team:team,position:i,location1:\"left\",location2:\"top\",location2Digit:\"1vh\",unit:\"vw\"}));});}return/*#__PURE__*/React.createElement(\"div\",{className:\"user-req-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inside\"},all));};_this.renderResponded=function(){var all=[];if(_this.state.responded.length>0){_this.state.responded.map(function(task,i){var team={title:task.teamName};all.push(/*#__PURE__*/React.createElement(Task,{userId:_this.props.userId,user:_this.props.user,taskId:\"\".concat(task.stage,\"-\").concat(task._id,\"+\").concat(i),token:_this.props.token,id:task._id,key:\"Task-\".concat(i),task:task,team:team,position:i}));});}return/*#__PURE__*/React.createElement(\"div\",{className:\"user-res-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inside\"},all));};_this.submitImg=function(e){e.preventDefault();var formData=new FormData();Object.keys(_this.state.image).map(function(key){formData.append(key,_this.state.image[key]);});fetch(\"/userImg/\".concat(_this.props.userId,\"-\").concat(_this.props.user._id),{method:\"POST\",headers:{Authorization:\"Bearer \"+_this.props.token},body:formData}).then(function(result){return result.json();}).then(function(result){if(result.done){}else{alert(result.message);}});};return _this;}_createClass(UserPage,[{key:\"render\",value:function render(){var _this2=this;var style={position:\"relative\"};if(this.state.pic!==\"\"){style.backgroundImage=\"url(\\\"\".concat(this.state.pic,\"\\\")\");}else{style.backgroundImage=\"\";}return this.props.token?/*#__PURE__*/React.createElement(\"div\",{className:\"user-page\",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},/*#__PURE__*/React.createElement(\"div\",{id:\"user-overflow\",style:{width:this.props.overflowWidth}},this.props.user._id===this.props.userId?/*#__PURE__*/React.createElement(\"form\",{style:style,id:\"user-page-img\",onSubmit:this.submitImg,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{className:\"task-picUrl2\",type:\"file\",name:\"picUrl\",id:\"picUrl\",onChange:function onChange(e){return _this2.createimg(e);}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",id:\"add-edit-user-img-btn\",className:\"fas fa-pencil-alt\"})):/*#__PURE__*/React.createElement(\"div\",{style:style,id:\"user-page-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"user-name\"},this.props.user.name),/*#__PURE__*/React.createElement(\"div\",{className:\"user-req\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-req-pan\"},\"REQUESTED\"),this.renderRequested()),/*#__PURE__*/React.createElement(\"div\",{className:\"user-res\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-req-pan\"},\"RESPONDED\"),this.renderResponded()))):/*#__PURE__*/React.createElement(\"div\",{className:\"user-page\",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},/*#__PURE__*/React.createElement(\"div\",{id:\"user-overflow\",style:{width:this.props.overflowWidth}},/*#__PURE__*/React.createElement(\"div\",{style:style,id:\"user-page-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"user-name\"},this.props.user.name),/*#__PURE__*/React.createElement(\"div\",{className:\"user-req\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-req-pan\"},\"REQUESTED\"),this.renderRequested()),/*#__PURE__*/React.createElement(\"div\",{className:\"user-res\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-req-pan\"},\"RESPONDED\"),this.renderResponded())));}}]);return UserPage;}(Component);export default UserPage;","map":{"version":3,"sources":["/Users/lailysarvarian/a-kanban/client/src/components/UserPage.js"],"names":["React","Component","opensocket","Task","UserPage","state","user","responded","requested","pic","image","componentDidMount","fetchUserInfo","props","setState","socket","on","data","action","fetch","_id","then","res","json","result","console","log","createimg","e","preventDefault","file","target","files","URL","createObjectURL","Object","assign","id","renderRequested","all","length","map","task","i","team","title","teamName","push","userId","stage","token","renderResponded","submitImg","formData","FormData","keys","key","append","method","headers","Authorization","body","done","alert","message","style","position","backgroundImage","width","pageWidth","left","pageLeft","borderRadius","pageRadius","alignItems","flexFlow","overflowWidth","name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport opensocket from \"socket.io-client\";\nimport Task from \"./Task\";\n\nclass UserPage extends Component {\n  state = {\n    user: {},\n    responded: [],\n    requested: [],\n    pic: \"\",\n    image: {},\n  };\n  componentDidMount = () => {\n    this.fetchUserInfo();\n    if (this.props.user.pic === \"\") {\n      this.setState({\n        pic: \"\",\n        user: this.props.user,\n      });\n    } else {\n      this.setState({\n        pic: `/${this.props.user.pic}`,\n        user: this.props.user,\n      });\n    }\n    const socket = opensocket(\"http://localhost:8080\");\n    socket.on(\"task\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchUserInfo();\n        // this.props.fetchUsers();\n      }\n    });\n    socket.on(\"taskChange\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchUserInfo();\n        // this.props.fetchUsers();\n      }\n    });\n    socket.on(\"taskChange\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchUserInfo();\n        // this.props.fetchUsers();\n      }\n    });\n    socket.on(\"taskMember\", (data) => {\n      if (data.action === \"create\"||data.action === \"delete\") {\n        this.fetchUserInfo();\n        // this.props.fetchUsers();\n      }\n    });\n    \n    socket.on(\"userImg\", (data) => {\n      if (data.action === \"create\") {\n        this.fetchUserInfo();\n        // this.props.fetchUsers();\n        // this.setState({\n        //   pic: `http://localhost:8080/${data}`,\n        // });\n      }\n    });\n  };\n  fetchUserInfo = () => {\n    fetch(`/user/${this.props.user._id}`)\n      .then((res) => {\n        return res.json();\n      })\n      .then((result) => {\n        console.log(result,\"yserpage\")\n\n        this.setState({ user: result.user,\n          responded:result.user.responded,\n          requested:result.user.requested });\n      });\n  };\n  createimg = (e) => {\n    e.preventDefault();\n    const file = e.target.files[0];\n    this.setState({ pic: URL.createObjectURL(file) });\n    let image = Object.assign({}, this.state.image);\n    image[e.target.id] = e.target.files[0];\n    this.setState({ image });\n  };\n  renderRequested = () => {\n    console.log(this.state.user,\"yserpage555\")\n\n    let all = [];\n    if (this.state.requested.length>0) {\n      this.state.requested.map((task, i) => {\n        const team = { title: task.teamName };\n        all.push(\n          <Task\n            userId={this.props.userId}\n            user={this.props.user}\n            taskId={`${task.stage}-${task._id}+${i}`}\n            token={this.props.token}\n            id={task._id}\n            key={`Task-${i}`}\n            task={task}\n            team={team}\n            position={i}\n            location1=\"left\"\n            location2=\"top\"\n            location2Digit=\"1vh\"\n            unit=\"vw\"\n          />\n        );\n      });\n    }\n    return (\n      <div className=\"user-req-container\">\n        <div className=\"inside\">{all}</div>\n      </div>\n    );\n  };\n  renderResponded = () => {\n    let all = [];\n    if (this.state.responded.length>0) {\n      this.state.responded.map((task, i) => {\n        const team = { title: task.teamName };\n        all.push(\n          <Task\n            userId={this.props.userId}\n            user={this.props.user}\n            taskId={`${task.stage}-${task._id}+${i}`}\n            token={this.props.token}\n            id={task._id}\n            key={`Task-${i}`}\n            task={task}\n            team={team}\n            position={i}\n          />\n        );\n      });\n    }\n    return (\n      <div className=\"user-res-container\">\n        <div className=\"inside\">{all}</div>\n      </div>\n    );\n  };\n  submitImg = (e) => {\n    e.preventDefault();\n    var formData = new FormData();\n    Object.keys(this.state.image).map((key) => {\n      formData.append(key, this.state.image[key]);\n    });\n    fetch(\n      `/userImg/${this.props.userId}-${this.props.user._id}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + this.props.token,\n        },\n        body: formData,\n      }\n    )\n      .then((result) => {\n        return result.json();\n      })\n      .then((result) => {\n        if (result.done) {\n  \n        } else {\n          alert(result.message);\n        }\n      });\n  };\n  render() {\n    const style = {\n      position: \"relative\",\n    };\n    if (this.state.pic !== \"\") {\n      style.backgroundImage = `url(\"${this.state.pic}\")`;\n    } else {\n      style.backgroundImage = \"\";\n    }\n    return this.props.token ? (\n      <div\n        className=\"user-page\"\n        style={{\n          width: this.props.pageWidth,\n          left: this.props.pageLeft,\n          borderRadius: this.props.pageRadius,\n          alignItems: this.props.flexFlow,\n        }}\n      >\n        <div id=\"user-overflow\" style={{ width: this.props.overflowWidth }}>\n          {this.props.user._id === this.props.userId ? (\n            <form\n              style={style}\n              id=\"user-page-img\"\n              onSubmit={this.submitImg}\n              encType=\"multipart/form-data\"\n            >\n              <input\n                className=\"task-picUrl2\"\n                type=\"file\"\n                name=\"picUrl\"\n                id=\"picUrl\"\n                onChange={(e) => this.createimg(e)}\n              />\n              <button\n                type=\"submit\"\n                id=\"add-edit-user-img-btn\"\n                className=\"fas fa-pencil-alt\"\n              />\n            </form>\n          ) : (\n            <div style={style} id=\"user-page-img\"></div>\n          )}\n          <div className=\"user-name\">{this.props.user.name}</div>\n          <div className=\"user-req\">\n            <span className=\"user-req-pan\">REQUESTED</span>\n            {this.renderRequested()}\n          </div>\n          <div className=\"user-res\">\n            <span className=\"user-req-pan\">RESPONDED</span>\n            {this.renderResponded()}\n          </div>\n        </div>\n      </div>\n    ) : (\n      <div\n        className=\"user-page\"\n        style={{\n          width: this.props.pageWidth,\n          left: this.props.pageLeft,\n          borderRadius: this.props.pageRadius,\n          alignItems: this.props.flexFlow,\n        }}\n      >\n        <div\n          id=\"user-overflow\"\n          style={{\n            width: this.props.overflowWidth,\n          }}\n        >\n          <div style={style} id=\"user-page-img\"></div>\n          <div className=\"user-name\">{this.props.user.name}</div>\n          <div className=\"user-req\">\n            <span className=\"user-req-pan\">REQUESTED</span>\n            {this.renderRequested()}\n          </div>\n\n          <div className=\"user-res\">\n            <span className=\"user-req-pan\">RESPONDED</span>\n            {this.renderResponded()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UserPage;\n"]},"metadata":{},"sourceType":"module"}