(this.webpackJsonp2020kanban=this.webpackJsonp2020kanban||[]).push([[0],{413:function(e,t,a){e.exports=a(712)},418:function(e,t,a){},419:function(e,t,a){},454:function(e,t){},712:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(63),o=a.n(r),i=(a(418),a(27)),c=a(28),l=a(30),p=a(29),m=(a(419),a(25)),u=a(24),d=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={authentication:{},message:""},e.renderPage=function(){if(!e.props.token)return"login"===e.props.link?n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"login-page-form"},n.a.createElement("div",{className:"login-title"},"LOGIN"),n.a.createElement("form",{onSubmit:e.login,className:"login-form"},n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"email",type:"email",placeholder:"Email"}),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"password",type:"password",placeholder:"Password"}),n.a.createElement(u.b,{to:"/password-Update-request",className:"change-password"},"Forgot your password?"),n.a.createElement("button",{type:"submit",className:"login-page-login-btn"},"LOGIN"),n.a.createElement("br",null),n.a.createElement(u.b,{onClick:function(t){return e.props.authPicker(t)},className:"header-link login-page-signup-btn",id:"signup",to:"/signup"},"SIGNUP"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)),e.message())):"signup"===e.props.link?n.a.createElement("div",{className:"login-page",style:{display:"".concat(e.props.display)}},n.a.createElement("div",{className:"login-page-form"},n.a.createElement("div",{className:"login-title"},"SIGNUP"),n.a.createElement("form",{onSubmit:e.signup,className:"signup-form"},n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"name",type:"text",placeholder:"Name"}),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"email",type:"email",placeholder:"Email"}),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"password",type:"password",placeholder:"Password"}),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"confirmPassword",type:"password",placeholder:"Confirm Password",required:!0}),n.a.createElement(u.b,{to:"/login",className:"have-account",id:"login",onClick:function(t){return e.props.authPicker(t)}},"Already have an account?"),n.a.createElement("br",null),n.a.createElement("button",{type:"submit",className:"login-page-login-btn"},"SIGNUP"),n.a.createElement("br",null),n.a.createElement("br",null)),e.message())):"passwordUpdateReq"===e.props.link?n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"login-page-form"},n.a.createElement("div",{className:"password-update-title"},"UPDATE PASSWORD REQUEST"),n.a.createElement("form",{className:"password-update-form",onSubmit:e.requestFor},n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"email",type:"text",placeholder:"Email"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{className:"password-update-btn",type:"submit"},"SUBMIT"),n.a.createElement("br",null),n.a.createElement(u.b,{to:"/login",className:"back-login-btn"}," ","LOGIN")),e.message())):n.a.createElement("div",{className:"login-page"},n.a.createElement("div",{className:"password-update-request"},n.a.createElement("div",{className:"password-update-title"},"UPDATE PASSWORD"),n.a.createElement("form",{className:"password-update-form",onSubmit:e.requestSubmit},n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"password",type:"password",placeholder:"Password"}),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createAcount(t)},id:"confirmPassword",type:"password",placeholder:"Confirm Password",required:!0}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{className:"password-update-btn",type:"submit"},"SUBMIT"),n.a.createElement("br",null),n.a.createElement(u.b,{to:"/login",className:"back-login-btn"}," ","LOGIN")),e.message()));e.props.history.push("/")},e.logout=function(e){e.preventDefault(),localStorage.clear()},e.createAcount=function(t){var a=Object.assign({},e.state.authentication);a[t.target.id]=t.target.value,e.setState({authentication:a})},e.signup=function(t){t.preventDefault();var a="hsla(".concat(~~(360*Math.random()),",94%,70%,.8)");fetch("http://localhost:8080/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.state.authentication.name,email:e.state.authentication.email,password:e.state.authentication.password,confirmPassword:e.state.authentication.confirmPassword,color:a})}).then((function(e){return e.json()})).then((function(t){t.user?e.props.history.push("/login"):e.setState({message:t.data})}))},e.login=function(t){t.preventDefault(),fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.authentication.email,password:e.state.authentication.password})}).then((function(e){return e.json()})).then((function(t){if(t.err)e.setState({message:t.err});else{e.props.authChange(t._id,t.token),localStorage.setItem("token",t.token),localStorage.setItem("userId",t._id);var a=new Date((new Date).getTime()+36e5);localStorage.setItem("expiryDate",a.toISOString()),e.setAutoLogout(36e5),e.props.history.push("/")}}))},e.setAutoLogout=function(t){setTimeout((function(){e.logoutHandler()}),t)},e.message=function(){var t=[];return e.state.message.length>0&&e.state.message.map((function(e,a){t.push(n.a.createElement("div",{key:a},e.msg))})),n.a.createElement("div",{id:"message"}," ",t)},e.requestFor=function(t){t.preventDefault(),fetch("http://localhost:8080/update-pass-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.authentication.email})}).then((function(e){return e.json()})).then((function(t){t.err?e.setState({message:t.err}):(e.props.setToken(t.token),e.setState({message:[{value:"follow email",msg:"please check your email"}],authentication:{email:""}}))}))},e.requestSubmit=function(t){t.preventDefault(),fetch("http://localhost:8080/update-pass/".concat(e.props.history.location.pathname.split("/")[2]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.state.authentication.password,confirmPassword:e.state.authentication.confirmPassword})}).then((function(e){return e.json()})).then((function(t){t.user?e.props.history.push("/login"):e.setState({message:t.err})}))},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,this.renderPage())}}]),a}(s.Component),h=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={teams:[],name:"",display:"none",render:"team",user:"",task:"",team:"",teamID:"",userID:""},e.addTeam=function(t){e.props.history.push("/"),e.props.movePage("close"),e.props.token?(e.props.teamPageDisplaySwitch(e.state.display),"none"===e.state.display?e.setState({display:"flex"}):e.setState({display:"none"})):e.props.history.push("/login")},e.submitTeam=function(t){t.preventDefault(),e.props.token&&fetch("/teams",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({title:e.state.name,color:"red",teamMembers:[],user:e.props.user})}).then((function(e){return e.json()})).then((function(t){e.props.teamPageDisplaySwitch("flex"),e.setState({display:"none",name:""}),e.redirect()}))},e.redirect=function(){e.props.fetchTeams(),fetch("/teams").then((function(e){return e.json()})).then((function(t){e.setState({teams:t.teams}),e.props.history.push("/teams/".concat(t.teams[t.teams.length-1]._id))}))},e.createTeam=function(t){e.setState({name:t.target.value})},e.removeTeam=function(t,a,s){fetch("/teams/".concat(s),{method:"DELETE",body:JSON.stringify({title:a,team:s}),headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.msg?e.props.history.push("/login"):(e.props.fetchTeams(),e.props.history.push("/"))}))},e.renderTeams=function(t){var a=[];return"team"===t?(a.push(n.a.createElement("div",{key:"team-title",id:"board-title"},"TEAMS")),e.props.teams.length>0&&e.props.teams.map((function(e,t){a.push(n.a.createElement(u.b,{to:"/teams/".concat(e._id),key:"link-".concat(t),className:"team-box",id:"".concat(t,"-team"),style:{textDecoration:"none"}},n.a.createElement("div",null," ",e.title.toUpperCase())))}))):"user"===t&&(a.push(n.a.createElement("div",{key:"users-title",id:"board-title"},"USERS")),e.props.users.length>0&&e.props.users.map((function(e,t){a.push(n.a.createElement(u.b,{to:"/users/".concat(e._id),key:"user-link-".concat(t),className:"user-box",id:"".concat(t,"-user"),style:{textDecoration:"none"}},n.a.createElement("div",null," ",e.name.toUpperCase())))}))),n.a.createElement("div",{className:"menu-cubes-container"},a)},e.switchTeamUser=function(t){t.preventDefault(),e.setState({display:"none"}),e.props.teamPageDisplaySwitch("flex"),"fas fa-address-card"===t.target.className?(e.props.movePage("open"),e.setState({containerDisplay:"flex",render:"user",user:"menu-btn-clicked",team:"",task:""})):"fas fa-users"===t.target.className?(e.props.movePage("open"),e.setState({render:"team",user:"",team:"menu-btn-clicked",task:""})):"menu-sign"===t.currentTarget.className&&(""===t.currentTarget.id?(e.props.movePage("open"),e.setState({render:"user",user:"menu-btn-clicked",team:"",task:""})):(e.props.movePage("close"),e.setState({user:"",team:"",task:""})))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){"none"===this.props.teamDisplay&&this.setState({display:"none"})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"menu-location",style:{display:this.props.teamDisplay}},n.a.createElement("button",{onClick:function(t){return e.addTeam(t)},className:"fas fa-plus",id:"team-plus"}),n.a.createElement("div",{className:"expanded-menu",style:{width:this.props.expandedWidth}},this.renderTeams(this.state.render)),n.a.createElement("div",{className:"unexpanded-menu"},n.a.createElement("div",{className:"menu-sign",id:this.props.menuSignId,onClick:function(t){return e.switchTeamUser(t)}},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null)),n.a.createElement("div",{className:"user",id:this.state.user},n.a.createElement("i",{className:"fas fa-address-card",onClick:function(t){return e.switchTeamUser(t)}})),n.a.createElement("div",{className:"team",id:this.state.team},n.a.createElement("i",{className:"fas fa-users",onClick:function(t){return e.switchTeamUser(t)}})),n.a.createElement("div",{className:"task",id:this.state.task},n.a.createElement("i",{className:"fas fa-tasks"}))),n.a.createElement("form",{onSubmit:function(t){return e.submitTeam(t)},className:"add-team-form",style:{display:this.state.display}},n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{className:"add-team"},"NEW TEAM"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("input",{onChange:function(t){return e.createTeam(t)},className:"name-input",id:"name",type:"text",placeholder:"Name",value:this.state.name}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{type:"submit",className:"add-team-btn"},"ADD TEAM")))}}]),a}(s.Component),f=a(45),g=a.n(f),k=a(26),y=a.n(k),E=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={members:[],deadline:"",display:"none"},e.componentDidMount=function(){console.log(e.props.task,"+++++++++++");var t=g()("http://localhost:8080");e.fetchMembers(),e.setState({deadline:e.props.task.deadline?y()(e.props.task.deadline).format("MMMM Do YYYY, HH:mm a "):""}),t.on("taskMember",(function(t){"create"===t.action&&e.fetchMembers()}))},e.fetchMembers=function(){fetch("/task-members/".concat(e.props.task._id),{headers:{Authorization:"Bearer "}}).then((function(e){return e.json()})).then((function(t){e.setState({members:t.members})}))},e.imgRender=function(){for(var t=[],a=0;a<e.state.members.length;a++){var s={position:"absolute",left:"".concat(2*a,"vh"),bottom:".3vmin",color:"white"};e.state.members[a].pic?s.backgroundImage='url("/'.concat(e.state.members[a].pic,'")'):(s.backgroundImage="none",s.backgroundColor=e.state.members[a].color,s.color="white"),console.log(e.state.members[a].pic,"this.state.members[i].pic",s),"#5f5f64b0"!==s.backgroundImage?t.push(n.a.createElement("div",{key:"img-".concat(a),className:"task-img",style:s},e.state.members[a].pic?"":"".concat(e.state.members[a].name.split(" ")[0][0]).concat(e.state.members[a].name.split(" ")[1][0]))):t.push(n.a.createElement("div",{key:"img-".concat(a),className:"task-img",style:s},n.a.createElement("div",null,e.state.members[a].pic?"":"".concat(e.state.members[a].name.split(" ")[0][0]).concat(e.state.members[a].name.split(" ")[1][0]))))}return n.a.createElement("div",{className:"members-container-user-page"},t)},e.renderRemove=function(){return e.props.token?n.a.createElement("span",{id:"user-page-span",onClick:function(t){return e.props.removeTask(t,e.props.task.team,e.props.task._id,e.props.task.stage,e.props.position)}},"-"):n.a.createElement("span",null)},e.displayModal=function(t){"flex"===e.state.display?e.setState({display:"none"}):e.setState({display:"flex"})},e.removeTask=function(t){e.props.token?fetch("http://localhost:8080/tasks/".concat(e.props.id),{method:"DELETE",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({user:localStorage.getItem("userId"),team:e.props.task.team,task:e.props.id,stage:e.props.task.stage,i:e.props.position})}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)})):e.props.history.push("/login")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={};return"top"===this.props.location1?(t.opacity=this.props.opacity,t.marginBottom=".3vh",t.marginLeft=".1vw",t.width="20vw",t.height="26%"):(t.margin="0 .5vh",t.width="20%",t.height="80%"),n.a.createElement("div",{className:"task-cube-user-page",id:"id-".concat(this.props.id,"+").concat(this.props.position),style:t,index:"yes"},n.a.createElement("div",{className:"task-cube-priority",onClick:function(t){return e.displayModal(t)},style:{backgroundColor:this.props.task.priority}}),n.a.createElement("div",{className:"task-title-user-page"},this.props.task.title.toUpperCase()),n.a.createElement("div",{className:"task-cube-middle-user-page"},n.a.createElement(u.b,{id:"link",className:"fas fa-question",to:"/".concat(this.props.team.title,"/").concat(this.props.task._id)}),n.a.createElement("div",{className:"member-count"},n.a.createElement("div",{className:"member-sign"},n.a.createElement("i",{className:"fas fa-user-friends"})),n.a.createElement("div",{className:"count"},this.props.task.responders.length)),n.a.createElement("div",{className:"deadline"},n.a.createElement("i",{className:"fas fa-clock"}),n.a.createElement("div",{className:"time"},"invalid date"===this.state.deadline?"":this.state.deadline))),this.imgRender(),this.props.user._id===this.props.userId?n.a.createElement("div",{className:"modal-content",style:{backgroundColor:this.props.task.priority,color:"white",display:this.state.display}},n.a.createElement("span",{onClick:function(t){return e.displayModal(t)},className:"close",style:{backgroundColor:this.props.task.priority}},"\xd7"),n.a.createElement("div",{className:"modal-text"},"Are you sure you want to delete?"),n.a.createElement("div",{id:"task-page-remove-task",onClick:function(t){return e.removeTask(t)},style:{color:this.props.task.priority}},"-")):n.a.createElement("div",{style:{background:"none"}}))}}]),a}(s.Component),v=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{},responded:[],requested:[],pic:"",image:{}},e.componentDidMount=function(){e.fetchUserInfo(),""===e.props.user.pic?e.setState({pic:"",user:e.props.user}):e.setState({pic:"/".concat(e.props.user.pic),user:e.props.user});var t=g()("http://localhost:8080");t.on("task",(function(t){"create"===t.action&&e.fetchUserInfo()})),t.on("taskChange",(function(t){"create"===t.action&&e.fetchUserInfo()})),t.on("taskChange",(function(t){"create"===t.action&&e.fetchUserInfo()})),t.on("taskMember",(function(t){"create"!==t.action&&"delete"!==t.action||e.fetchUserInfo()})),t.on("userImg",(function(t){"create"===t.action&&e.fetchUserInfo()}))},e.fetchUserInfo=function(){fetch("/user/".concat(e.props.user._id)).then((function(e){return e.json()})).then((function(t){console.log(t,"yserpage"),e.setState({user:t.user,responded:t.user.responded,requested:t.user.requested})}))},e.createimg=function(t){t.preventDefault();var a=t.target.files[0];e.setState({pic:URL.createObjectURL(a)});var s=Object.assign({},e.state.image);s[t.target.id]=t.target.files[0],e.setState({image:s})},e.renderRequested=function(){console.log(e.state.user,"yserpage555");var t=[];return e.state.requested.length>0&&e.state.requested.map((function(a,s){var r={title:a.teamName};t.push(n.a.createElement(E,{userId:e.props.userId,user:e.props.user,taskId:"".concat(a.stage,"-").concat(a._id,"+").concat(s),token:e.props.token,id:a._id,key:"Task-".concat(s),task:a,team:r,position:s,location1:"left",location2:"top",location2Digit:"1vh",unit:"vw"}))})),n.a.createElement("div",{className:"user-req-container"},n.a.createElement("div",{className:"inside"},t))},e.renderResponded=function(){var t=[];return e.state.responded.length>0&&e.state.responded.map((function(a,s){var r={title:a.teamName};t.push(n.a.createElement(E,{userId:e.props.userId,user:e.props.user,taskId:"".concat(a.stage,"-").concat(a._id,"+").concat(s),token:e.props.token,id:a._id,key:"Task-".concat(s),task:a,team:r,position:s}))})),n.a.createElement("div",{className:"user-res-container"},n.a.createElement("div",{className:"inside"},t))},e.submitImg=function(t){t.preventDefault();var a=new FormData;Object.keys(e.state.image).map((function(t){a.append(t,e.state.image[t])})),fetch("/userImg/".concat(e.props.userId,"-").concat(e.props.user._id),{method:"POST",headers:{Authorization:"Bearer "+e.props.token},body:a}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={position:"relative"};return""!==this.state.pic?t.backgroundImage='url("'.concat(this.state.pic,'")'):t.backgroundImage="",this.props.token?n.a.createElement("div",{className:"user-page",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},n.a.createElement("div",{id:"user-overflow",style:{width:this.props.overflowWidth}},this.props.user._id===this.props.userId?n.a.createElement("form",{style:t,id:"user-page-img",onSubmit:this.submitImg,encType:"multipart/form-data"},n.a.createElement("input",{className:"task-picUrl2",type:"file",name:"picUrl",id:"picUrl",onChange:function(t){return e.createimg(t)}}),n.a.createElement("button",{type:"submit",id:"add-edit-user-img-btn",className:"fas fa-pencil-alt"})):n.a.createElement("div",{style:t,id:"user-page-img"}),n.a.createElement("div",{className:"user-name"},this.props.user.name),n.a.createElement("div",{className:"user-req"},n.a.createElement("span",{className:"user-req-pan"},"REQUESTED"),this.renderRequested()),n.a.createElement("div",{className:"user-res"},n.a.createElement("span",{className:"user-req-pan"},"RESPONDED"),this.renderResponded()))):n.a.createElement("div",{className:"user-page",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},n.a.createElement("div",{id:"user-overflow",style:{width:this.props.overflowWidth}},n.a.createElement("div",{style:t,id:"user-page-img"}),n.a.createElement("div",{className:"user-name"},this.props.user.name),n.a.createElement("div",{className:"user-req"},n.a.createElement("span",{className:"user-req-pan"},"REQUESTED"),this.renderRequested()),n.a.createElement("div",{className:"user-res"},n.a.createElement("span",{className:"user-req-pan"},"RESPONDED"),this.renderResponded())))}}]),a}(s.Component),b=a(370),S=a(102),T=a(372),N=a.n(T),D=a(244),w=a.n(D),C=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={members:[],deadline:"",display:"none"},e.componentDidMount=function(){var t=g()("http://localhost:8080");e.fetchMembers(),e.setState({deadline:e.props.card.deadline?y()(e.props.card.deadline).format("MMMM Do YYYY, HH:mm a "):""}),t.on("taskMember",(function(t){"create"===t.action&&e.fetchMembers()}))},e.fetchMembers=function(){fetch("/task-members/".concat(e.props.card._id),{headers:{Authorization:"Bearer "}}).then((function(e){return e.json()})).then((function(t){e.setState({members:t.members})}))},e.renderRemove=function(){return e.props.token?n.a.createElement("span",{id:"user-page-span",onClick:function(t){return e.props.removeTask(t,e.props.card.team,e.props.card._id,e.props.card.stage,e.props.position)}},"-"):n.a.createElement("span",null)},e.displayModal=function(t){"flex"===e.state.display?e.setState({display:"none"}):e.setState({display:"flex"})},e.removeTask=function(t){e.props.token?fetch("/tasks/".concat(e.props.id),{method:"DELETE",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({user:localStorage.getItem("userId"),team:e.props.card.team,task:e.props.id,stage:e.props.card.stage,i:e.props.position})}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)})):e.props.history.push("/login")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,s=t.isDragging,r=t.connectDragSource,o=t.connectDropTarget,i=(this.state.members,s?.5:1);return r(o(n.a.createElement("div",{className:"task-cube",id:"id-".concat(this.props.id,"+").concat(this.props.position),style:{opacity:i},index:"whatttt"},n.a.createElement("i",{className:"fas fa-bookmark",id:"bookmark-".concat(this.props.id,"+").concat(this.props.position),style:{color:a.priority}}),n.a.createElement("div",{className:"task-title",id:"cube-".concat(this.props.id,"+").concat(this.props.position)},a.title.toUpperCase()),n.a.createElement("div",{className:"task-cube-middle"},n.a.createElement(u.b,{id:"link",className:"fas fa-question",to:"/".concat(this.props.team.title,"/").concat(a._id)}),n.a.createElement("div",{className:"member-count"},n.a.createElement("div",{className:"member-sign"},n.a.createElement("i",{className:"fas fa-user-friends"})),n.a.createElement("div",{className:"count"},a.responders.length)),this.props.card.deadline?n.a.createElement("div",{className:"deadline"},n.a.createElement("div",{className:"background"}),n.a.createElement("div",{id:"cube-deadline",style:{opacity:this.state.timeOpacity}},this.props.card.deadline?y()(this.props.card.deadline).format("MMMM Do YYYY, HH:mm a "):""),n.a.createElement("div",{className:"fas fa-clock",onMouseOver:function(t){e.setState({timeOpacity:"1"})},onMouseLeave:function(t){e.setState({timeOpacity:"0"})}})):n.a.createElement("div",{className:"deadline"})),n.a.createElement("div",{className:"members-container"},this.props.card.responders.map((function(e,t){var a;return a={position:"absolute",right:"".concat(2*t,"vh"),top:"0",backgroundImage:"none",color:"white",backgroundColor:e.color},n.a.createElement("div",{key:"img-".concat(t),className:"task-img",style:a},n.a.createElement("div",null,"".concat(e.name.split(" ")[0][0].toUpperCase(),"\n                        ").concat(e.name.split(" ")[1][0].toUpperCase())))}))))))}}]),a}(s.Component),I={beginDrag:function(e,t,a){var s=Object(r.findDOMNode)(a).getBoundingClientRect();return{index:e.index,listId:e.listId,card:e.card,cardBottom:s.bottom,cardTop:s.top}},endDrag:function(e,t){var a=t.getItem(),s=t.getDropResult();s&&s.listId!==a.listId&&e.removeCard(a.index)}},O={hover:function(e,t,a){var s=t.getItem().index,n=e.index,o=t.getItem().listId,i=t.getItem().card;t.getItem().cardBottom,t.getItem().cardTop;if(s!==n){var c=Object(r.findDOMNode)(a).getBoundingClientRect(),l=c.bottom-c.top,p=t.getClientOffset().y-c.top;s<n&&p<l/400||s>n&&p/4>l||e.listId===o&&(e.moveCard(s,n,i),t.getItem().index=n)}}},P=w()(Object(S.DropTarget)("CARD",O,(function(e){return{connectDropTarget:e.dropTarget()}})),Object(S.DragSource)("CARD",I,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})))(C),j=(a(543),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){s.fetchTasks("na","na");var e=g()("http://localhost:8080");e.on("task",(function(e){"create"===e.action&&s.fetchTasks("na","na")})),e.on("taskChange",(function(e){"create"===e.action&&s.fetchTasks("na","na")}))},s.fetchTasks=function(e,t){fetch("/team/tasks-".concat(s.props.team._id,"-").concat(t,"-").concat(e)).then((function(e){return e.json()})).then((function(e){s.setState({tasks:e.tasks})}))},s.sort=function(e,t){e.preventDefault(),"dsc"===e.target.value?(s.fetchTasks("na","na"),s.setState({sort:"dsc"})):"asc"===e.target.value?fetch("/team/tasks-".concat(s.props.team._id,"-na-na")).then((function(e){return e.json()})).then((function(e){var a=e.tasks;a[t]=a[t].reverse(),s.setState({tasks:a})})):"STANDARD"===e.target.value?fetch("/team/tasks-".concat(s.props.team._id,"-").concat(t,"-STANDARD")).then((function(e){return e.json()})).then((function(e){var a=s.state.tasks;a[t]=e.tasks,s.setState({tasks:a})})):"FIXED"===e.target.value?fetch("/team/tasks-".concat(s.props.team._id,"-").concat(t,"-FIXED")).then((function(e){return e.json()})).then((function(e){var a=s.state.tasks;a[t]=e.tasks,s.setState({tasks:a})})):"EXPEDITE"===e.target.value&&fetch("/team/tasks-".concat(s.props.team._id,"-").concat(t,"-EXPEDITE")).then((function(e){return e.json()})).then((function(e){var a=s.state.tasks;a[t]=e.tasks,s.setState({teamTasks:a})}))},s.state={cards:e.list,tasks:{},sort:"asc"},s}return Object(c.a)(a,[{key:"pushCard",value:function(e){var t=this;if(e.responders.filter((function(e){return e._id===t.props.user})).length>0){var a=this.state.tasks;e.stage=this.props.name,a[this.props.name].push(e),this.setState({tasks:a}),fetch("/team-push/".concat(this.props.team._id),{method:"PUT",headers:{Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"},body:JSON.stringify({user:this.props.user,board:this.props.name,card:e,action:"push"})}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)}))}else alert("YOu dont have the right to move this task")}},{key:"removeCard",value:function(e){var t=this;if(console.log(this.state.tasks[this.props.name][e],"this.state.tasks[this.props.name][index]"),this.state.tasks[this.props.name][e].responders.filter((function(e){return e._id===t.props.user})).length>0){var a=this.state.tasks;a[this.props.name].splice(e,1),this.setState({tasks:a}),fetch("/team-remove/".concat(this.props.team._id),{method:"PUT",headers:{Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"},body:JSON.stringify({user:this.props.user,board:this.props.name,index:e,action:"push"})}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)}))}else alert("YOu dont have the right to move this task")}},{key:"moveCard",value:function(e,t,a){var s=this.state.tasks;s[this.props.name].splice(e,1),s[this.props.name].splice(t,0,a),this.setState({tasks:s})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.cards,t.tasks),s=this.props,r=s.canDrop,o=s.isOver,i=s.connectDropTarget,c=a[this.props.name]?a[this.props.name]:[],l=r&&o?"#f5f4f386":"#f5f4f349";return i(n.a.createElement("div",{className:"each-board",style:{display:"flex"},key:"board-".concat(this.props.name)},n.a.createElement("div",{className:"board-header"},n.a.createElement("div",{id:"board-header-title"},n.a.createElement("div",{id:"circle"}),this.props.name),n.a.createElement("select",{onChange:function(t){return e.sort(t,e.props.name)},className:"select-sort "},n.a.createElement("option",{className:"react-select-option",value:"all"}),n.a.createElement("option",{className:"react-select-option",value:"asc"},"LEAST RECENT"),n.a.createElement("option",{className:"react-select-option",value:"dsc"},"MOST RECENT"),n.a.createElement("option",{className:"react-select-option",value:"STANDARD"},"STANDARD"),n.a.createElement("option",{className:"react-select-option",value:"FIXED"},"FIXED DATE"),n.a.createElement("option",{className:"react-select-option",value:"EXPEDITE"},"EXPEDITE"))),n.a.createElement("div",{className:"tasks-container",key:"tasks-container",style:{backgroundColor:l}},c.map((function(t,a){return n.a.createElement(P,{key:"Task-".concat(a),index:a,listId:e.props.id,card:t,removeCard:e.removeCard.bind(e),moveCard:e.moveCard.bind(e),token:e.props.token,user:e.props.user,team:e.props.team,opacity:e.props.opacity,history:e.props.history,taskId:"".concat(t.stage,"-").concat(t._id,"+").concat(a),id:t._id,task:t,position:a,location1:"top",location2:"left",location2Digit:".5vw",unit:"vh",page:"teamPage"})})))))}}]),a}(s.Component)),x=Object(S.DropTarget)("CARD",{drop:function(e,t,a){var s=e.id,n=t.getItem();return s!==n.listId&&a.pushCard(n.card),{listId:s}}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))(j),R=a(193),A=function(e){return n.a.createElement("div",{id:"task-form",style:{display:e.displayTask}},n.a.createElement("div",{id:"add-task-close",onClick:function(t){return e.closeTask(t)}},"X"),n.a.createElement("form",{onSubmit:function(t){return e.submitTask(t)},className:"add-task-form",style:{width:e.taskWidth}},n.a.createElement("div",{id:"add-task-title"},"REQUEST"),n.a.createElement("input",{onChange:function(t){return e.createTask(t)},id:"title",type:"text",placeholder:"title",value:e.newTask.title||""}),n.a.createElement("textarea",{onChange:function(t){return e.createTask(t)},id:"description",type:"text",placeholder:"description",rows:"10",style:{resize:"none"},value:e.newTask.description||""}),n.a.createElement("input",{onChange:function(t){return e.createTask(t)},id:"url",type:"url",placeholder:"url",value:e.newTask.url||""}),n.a.createElement(R.DateTimeInput,{name:"dateTime",placeholder:"Date Time",value:e.dateTime,iconPosition:"left",onChange:e.handleChange,style:{width:"20vw"},dateTimeFormat:"YYYY-MM-DD HH:mm"}),n.a.createElement("select",{value:e.newTask.priority,onChange:function(t){return e.createTask(t)},id:"priority"},n.a.createElement("option",{value:"#0aa7f5"},"STANDARD"),n.a.createElement("option",{value:"#EDF67D"},"FIXED DATE"),n.a.createElement("option",{value:"#ff006e"},"EXPEDITE")),n.a.createElement("button",{type:"submit",className:"main-button"},"SUBMIT")))},M=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={boards:["REQUESTED","INPROGRESS","DONE","TRASH"],displayTask:"none",display:"flex",priority:"",opacity:"1",newTask:{priority:"#0aa7f5",stage:"REQUESTED"},teamTasks:{},dragged:{},draggedfrom:{},sign:{REQUESTED:"fas fa-sort-up",INPROGRESS:"fas fa-sort-up",DONE:"fas fa-sort-up"},date:"",time:"",dateTime:"",datesRange:"",selectedOption:null},e.componentDidMount=function(){e.fetchTasks("na","na");var t=g()("http://localhost:8080");t.on("task",(function(t){"create"===t.action&&e.fetchTasks("na","na")})),t.on("taskChange",(function(t){"create"===t.action&&e.fetchTasks("na","na")}))},e.fetchTasks=function(t,a){fetch("/team/tasks-".concat(e.props.team._id,"-").concat(a,"-").concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({teamTasks:t.tasks})}))},e.handleChange=function(t,a){var s=a.name,n=a.value;e.setState(Object(b.a)({},s,n))},e.search=function(e){},e.submitTask=function(t){t.preventDefault(),e.setState({display:"flex"}),e.props.token?fetch("/tasks",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({title:e.state.newTask.title,description:e.state.newTask.description,creator:e.props.user,priority:e.state.newTask.priority,responder:[],url:e.state.newTask.url||"",stage:e.state.newTask.stage,datetime:e.state.dateTime||"",team:e.props.team})}).then((function(e){return e.json()})).then((function(t){t.done?e.setState({displayTask:"none",newTask:{title:"",description:"",url:"",priority:"#priority",stage:"REQUESTED"}}):alert(t.message)})):e.props.history.push("/login")},e.closeTask=function(t){e.setState({displayTask:"none",display:"flex"})},e.createTask=function(t){var a=Object.assign({},e.state.newTask);a[t.target.id]=t.target.value,e.setState({newTask:a}),e.setState({newTask:a})},e.requestTasks=function(t){e.props.teamPageDisplaySwitch("none"),e.props.movePage("close"),e.props.token?"none"===e.state.displayTask?e.setState({displayTask:"flex",display:"none"}):e.setState({displayTask:"none",display:"flex"}):e.props.history.push("/login")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=(this.state.teamTasks.REQUESTED,this.state.teamTasks.INPROGRESS),a=this.state.teamTasks.DONE;return n.a.createElement("div",{className:"each-page",style:{width:this.props.pageWidth,left:this.props.pageLeft}},n.a.createElement("div",{className:"team-title"},this.props.team.title.toUpperCase()),n.a.createElement("div",{style:{display:this.state.display}},n.a.createElement(x,{key:"Container-".concat(0),name:"REQUESTED",className:"REQUESTED",id:0,i:"REQUESTED",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign.REQUESTED,requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history}),n.a.createElement(x,{key:"Container-".concat(1),name:"INPROGRESS",className:"INPROGRESS",id:1,i:"INPROGRESS",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign.INPROGRESS,tasks:t||[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history}),n.a.createElement(x,{key:"Container-".concat(2),name:"DONE",className:"DONE",id:2,i:"DONE",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign.DONE,tasks:a||[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history}),n.a.createElement(x,{key:"Container-".concat(3),name:"TRASH",className:"TRASH",id:3,i:"TRASH",team:this.props.team,token:this.props.token,user:this.props.user,display:this.state.display,sortOptions:this.state.sortOptions,sign:this.state.sign.DONE,tasks:[],requestTasks:this.requestTasks,renderTasks:this.renderTasks,opacity:this.state.opacity,history:this.props.history})),this.props.token?n.a.createElement("div",null,n.a.createElement("i",{className:"fas fa-plus",id:"add-task-btn",onClick:function(t){return e.requestTasks(t)}}),n.a.createElement("div",{className:"team-title"},this.props.team.title.toUpperCase()),n.a.createElement(A,{displayTask:this.state.displayTask,createTask:this.createTask,handleChange:this.handleChange,date:this.state.date,dateTime:this.state.dateTime,priority:this.priority,submitTask:this.submitTask,closeTask:this.closeTask,newTask:this.state.newTask,taskWidth:this.props.taskWidth})):n.a.createElement("div",null))}}]),a}(s.Component),U=Object(S.DragDropContext)(N.a)(M),W=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={optionDisplay:"none",pic:""},e.componentDidMount=function(){console.log(e.props.member,"*********"),""!==e.props.member.pic?e.setState({pic:"/".concat(e.props.member.pic)}):e.setState({pic:""})},e.memberOption=function(t){"none"===e.state.optionDisplay?e.setState({optionDisplay:"flex"}):e.setState({optionDisplay:"none"})},e.outOfProject=function(t){t.preventDefault(),fetch("/task-members/remove",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({task:e.props.task._id,user:e.props.user})}).then((function(e){return e.json()})).then((function(e){e.done?console.log(e,"outOfProject"):alert(e.message)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={color:"white"};""===this.state.pic?t.background=this.props.member.color:t.background="none";var a={position:"relative",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"};return this.state.pic?a.backgroundImage='url("'.concat(this.state.pic,'")'):a.backgroundImage="",this.props.token?n.a.createElement("div",{className:"task-page-img",id:this.props.i,onClick:function(t){return e.memberOption(t)},style:a},n.a.createElement("div",{className:"task-page-member-pic",style:t},""===this.state.pic?"".concat(this.props.member.name.split(" ")[0][0].toUpperCase(),"\n              ").concat(this.props.member.name.split(" ")[1][0].toUpperCase()):""),n.a.createElement(u.b,{to:"/users/".concat(this.props.member._id),className:"task-page-img-info",style:{display:this.state.optionDisplay}},"?"),n.a.createElement("div",{className:"task-page-img-remove",onClick:function(t){return e.outOfProject(t)},style:{display:this.state.optionDisplay}},"-")):n.a.createElement("div",{className:"task-page-img",id:this.props.i,onClick:function(t){return e.memberOption(t)},style:a},n.a.createElement("div",{className:"task-page-member-pic",style:t},""===this.state.pic?"".concat(this.props.member.name.split(" ")[0][0].toUpperCase(),"\n              ").concat(this.props.member.name.split(" ")[1][0].toUpperCase()):""),n.a.createElement(u.b,{to:"/users/".concat(this.props.member._id),className:"task-page-img-info",style:{display:this.state.optionDisplay}},"?"))}}]),a}(s.Component),_=a(754),B=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={members:[],pic:"",image:{},optionDisplay:"none",deadline:"",datetime:"",priority:"",comments:[],newComment:{}},e.componentDidMount=function(){e.getMembers(),e.fetchComments(),e.props.task.deadline?e.setState({deadline:y()(e.props.task.deadline).format("MMMM Do YYYY, HH:mm a "),datetime:e.props.task.deadline,priority:e.props.task.priority}):e.setState({deadline:"",datetime:e.props.task.deadline,priority:e.props.task.priority}),""!==e.props.task.pic?e.setState({pic:"http://localhost:8080/".concat(e.props.task.pic)}):e.setState({pic:""});var t=g()("http://localhost:8080");t.on("taskComment",(function(t){"create"===t.action&&e.fetchComments()})),t.on("taskMember",(function(t){"create"!==t.action&&"delete"!==t.action||e.getMembers()})),t.on("taskImg",(function(t){"create"===t.action&&e.setState({pic:"/".concat(t.img)})}))},e.fetchComments=function(){fetch("/comments/".concat(e.props.task._id)).then((function(e){return e.json()})).then((function(t){e.setState({comments:t.comments})}))},e.getMembers=function(){fetch("/task-members/".concat(e.props.task._id),{headers:{Authorization:"Bearer "+e.props.token}}).then((function(e){return e.json()})).then((function(t){e.setState({members:t.members})}))},e.createImg=function(t){t.preventDefault();var a=t.target.files[0];e.setState({pic:URL.createObjectURL(a)});var s=Object.assign({},e.state.image);s[t.target.id]=t.target.files[0],e.setState({image:s})},e.handleChange=function(t,a){a.name;var s=a.value;e.setState({deadline:s,datetime:s})},e.createEdit=function(t){e.setState({priority:t.target.value})},e.createComment=function(t){e.setState({newComment:{id:e.props.user,comment:t.target.value}})},e.updateMembers=function(t){e.setState({members:t})},e.submitImg=function(t){if(t.preventDefault(),e.props.task.creator===e.props.user){var a=new FormData;Object.keys(e.state.image).map((function(t){a.append(t,e.state.image[t])})),fetch("http://localhost:8080/taskImg/".concat(e.props.user,"-").concat(e.props.task._id),{method:"POST",headers:{Authorization:"Bearer "+e.props.token},body:a}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)}))}else alert("you are not eligible to change the picture")},e.participate=function(t){t.preventDefault(),fetch("http://localhost:8080/task-members",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({task:e.props.task,user:e.props.user})}).then((function(e){return e.json()})).then((function(e){e.done?console.log(e,">>>>>"):alert(e.message)}))},e.submitComment=function(t){t.preventDefault(),e.setState({newComment:{}}),fetch("http://localhost:8080/task-comment",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({comment:e.state.newComment,user:e.props.user,responders:e.props.task.responders,taskId:e.props.task._id,date:new Date})}).then((function(e){return e.json()})).then((function(t){t.done?e.setState({newComment:{}}):alert(t.message)}))},e.submitChange=function(t){t.preventDefault(),e.props.token?fetch("http://localhost:8080/update-task",{method:"POST",headers:{Authorization:"Bearer "+e.props.token,"Content-Type":"application/json"},body:JSON.stringify({id:e.props.task._id,title:e.props.task.title,description:e.props.task.description,priority:e.state.priority,url:e.props.task.url||"",deadline:e.state.datetime,user:e.props.user})}).then((function(e){return e.json()})).then((function(e){e.done||alert(e.message)})):e.props.history.push("/login")},e.renderMembers=function(){console.log(e.state.members,">>>>>>>><<<<<<<<<<<");var t=[];return e.state.members.map((function(a,s){t.push(n.a.createElement(W,{key:"img-".concat(s),member:a,members:a.responders,updateMembers:e.updateMembers,i:s,token:e.props.token,task:e.props.task,user:e.props.user}))})),n.a.createElement("div",{className:"task-page-members",key:"task-page-members"},t)},e.renderCommentArea=function(){var t=[];return e.state.comments.length>0&&e.state.comments.map((function(e,a){t.push(n.a.createElement("div",{className:"comment-cube",key:"comment-cube-".concat(a)},n.a.createElement("p",{className:"comment"},n.a.createElement("span",{style:{fontSize:"110%",fontWeight:"400"}},"".concat(e.commenter,": ")),e.comment,n.a.createElement("br",null),n.a.createElement("span",{className:"comment-date",style:{fontSize:"80%",fontWeight:"400"}},e.date?y()(e.date).format("MMMM Do YYYY, HH:mm a "):""))))})),e.props.token?n.a.createElement("div",{className:"comments-area",key:"comments-area"},t,n.a.createElement("form",{onSubmit:e.submitComment},n.a.createElement("br",null),n.a.createElement("textarea",{id:"text-area",value:e.state.newComment.comment||"",onChange:function(t){return e.createComment(t)}}),n.a.createElement("br",null),n.a.createElement("button",{type:"submit",className:"post-comment-btn"},"COMMENT"))):n.a.createElement("div",{className:"comments-area",key:"comments-area"},t)},e.defaultPriority=function(e){return"#0aa7f5"===e?"STANDARD":"#EDF67D"===e?"FIXED DATE":"#ff006e"===e?"EXPEDITE":void 0},e.renderPage=function(){var t=new Date;if(e.props.token){var a={position:"relative"};return e.state.pic?(a.backgroundImage='url("'.concat(e.state.pic,'")'),a.height="40vh"):(a.backgroundImage="",a.height="10vh"),n.a.createElement("div",{className:"task-page-container",style:{width:e.props.overflowWidth}},n.a.createElement("div",{className:"task-overflow",style:{width:e.props.overflowWidth}},n.a.createElement("form",{id:"input",style:a,onSubmit:e.submitImg,encType:"multipart/form-data"},n.a.createElement("input",{className:"task-picUrl",type:"file",name:"picUrl",id:"picUrl",onChange:function(t){return e.createImg(t)}}),n.a.createElement("button",{type:"submit",id:"task-img-update-btn",className:"fas fa-pencil-alt"})),n.a.createElement("div",{className:"task-page-name"},e.props.task.title.toUpperCase()),n.a.createElement("p",{className:"task-page-desc"},e.props.task.description,n.a.createElement("a",{href:"".concat(e.props.task.url)},"LINK")),n.a.createElement(_.a,{onSubmit:function(t){return e.submitChange(t)},id:"edit-date-form"},n.a.createElement(R.DateTimeInput,{initialDate:t,id:"date-timeInput",className:"task-page-date",name:"dateTime",placeholder:"Deadline",value:e.state.deadline,iconPosition:"right",onChange:e.handleChange,style:{width:"40vw",border:"none",outline:"none"},dateTimeFormat:"YYYY-MM-DD HH:mm"}),n.a.createElement("select",{value:e.state.priority,onChange:function(t){return e.createEdit(t)},id:"edit-select",style:{border:"none",outline:"none"}},n.a.createElement("option",{value:"".concat(e.state.priority),style:{color:e.state.priority,fontSize:"300%",fontWeight:"bolder"},defaultValue:!0},e.defaultPriority(e.state.priority)),n.a.createElement("option",{value:"#0aa7f5"},"STANDARD"),n.a.createElement("option",{value:"#EDF67D"},"FIXED DATE"),n.a.createElement("option",{value:"#ff006e"},"EXPEDITE")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{type:"submit",id:"update-button",className:"fas fa-pencil-alt"})),e.renderCommentArea(),e.renderMembers(),n.a.createElement("div",{className:"participate-btn",onClick:function(t){return e.participate(t)}},"+")))}var s={position:"relative"};return""!==e.state.pic?(s.backgroundImage='url("'.concat(e.state.pic,'")'),s.height="40vh"):(s.backgroundImage="",s.height="10vh"),n.a.createElement("div",{className:"task-page-container",style:{width:e.props.overflowWidth}},n.a.createElement("div",{className:"task-overflow",style:{width:e.props.overflowWidth}},n.a.createElement("div",{id:"input",style:s}),n.a.createElement("div",{className:"task-page-name"},e.props.task.title.toUpperCase()),n.a.createElement("p",{className:"task-page-desc"},e.props.task.description,n.a.createElement("a",{className:"task-page-link-inside",href:"".concat(e.props.task.url)},n.a.createElement("span",null),"LINK"),n.a.createElement("span",{className:"task-page-date-inside",style:{color:"#ff006e",width:"66vw",height:"3vh",margin:"1vh 0"}},e.state.deadline," ")),n.a.createElement("div",{id:"edit-date-form"},n.a.createElement("div",{className:"edit-date-form-p",style:{border:"solid .1px ".concat(e.state.priority)}},e.defaultPriority(e.state.priority))),e.renderCommentArea(),e.renderMembers()))},e}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"task-page",style:{width:this.props.pageWidth,left:this.props.pageLeft,borderRadius:this.props.pageRadius,alignItems:this.props.flexFlow}},this.renderPage())}}]),a}(s.Component),q=a(47),L=Object(q.a)(),Y=(a(695),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={authSign:"fas fa-sign-in-alt",signupBtnDisplay:"flex",sigoutBtnDisplay:"none",id:"login",loginDisplay:"flex",teamPageDisplay:"flex",teamDisplay:"flex",homeDisplay:"none",memberDisplay:"none",expandedWidth:"7.3vh",flexFlow:"center",overflowWidth:"91vw",pageLeft:"5vw",pageWidth:"94vw",pageRadius:"0",taskWidth:"91vw",menuSignId:"",btnTitle:"LOGIN",link:"",teams:[],tasks:[],users:[],isAuth:!1,token:null,userId:null,authLoading:!1,members:[]},e.componentDidMount=function(){var t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate"),s=localStorage.getItem("userId"),n=g()("http://localhost:8080"),r=new Date(a).getTime()-(new Date).getTime();e.fetchUsers(),e.fetchTasks(),e.fetchTeams(),e.setState({isAuth:!0,token:t,userId:s}),e.setAutoLogout(r),n.on("team",(function(t){"create"===t.action&&e.fetchTeams()})),n.on("loggedin",(function(t){"create"===t.action&&e.setState({signupBtnDisplay:"none",sigoutBtnDisplay:"flex",loginDisplay:"none"})})),n.on("task",(function(t){"create"===t.action&&e.fetchTasks()})),n.on("signup",(function(t){"create"===t.action&&e.fetchUsers()})),new Date(a)<=new Date?e.logout():(e.setState({userId:s,token:t}),t?e.setState({authSign:"fas fa-sign-out-alt",signupBtnDisplay:"none",sigoutBtnDisplay:"flex",loginDisplay:"none"}):e.setState({authSign:"fas fa-sign-in-alt",signupBtnDisplay:"flex",loginDisplay:"flex"}))},e.fetchUsers=function(){fetch("/allUsers").then((function(e){return e.json()})).then((function(t){e.setState({users:t.users})}))},e.fetchTeams=function(){fetch("/teams").then((function(e){return e.json()})).then((function(t){e.setState({teams:t.teams})}))},e.fetchTasks=function(){fetch("/tasks",{}).then((function(e){return e.json()})).then((function(t){e.setState({tasks:t.tasks})}))},e.setAutoLogout=function(t){setTimeout((function(){e.logout()}),t)},e.logout=function(){localStorage.clear(),e.setState({isAuth:!1,userId:null,authSign:"fas fa-sign-in-alt",signupBtnDisplay:"flex",sigoutBtnDisplay:"none",loginDisplay:"flex"})},e.authChange=function(t,a){e.setState({isAuth:!0,authLoading:!1,token:a,userId:t,sigoutBtnDisplay:"flex"}),e.fetchTeams()},e.userPages=function(){return e.state.users.map((function(t,a){return n.a.createElement(m.a,{key:"user-".concat(a),exact:!0,path:"/users/".concat(t._id),render:function(){return n.a.createElement(v,{fetchUsers:e.fetchUsers,user:t,token:localStorage.getItem("token"),userId:localStorage.getItem("userId"),expiryDate:localStorage.getItem("expiryDate"),pageLeft:e.state.pageLeft,pageWidth:e.state.pageWidth,pageRadius:e.state.pageRadius,taskWidth:e.state.taskWidth,overflowWidth:e.state.overflowWidth,flexFlow:e.state.flexFlow})}})}))},e.teamPages=function(){return e.state.teams.map((function(t,a){return n.a.createElement(m.a,{key:"team-".concat(a),exact:!0,path:"/teams/".concat(t._id),render:function(){return n.a.createElement(U,{title:t.title,team:t,history:L,teamPageDisplay:e.state.teamPageDisplay,members:e.fetchTaskMembers,pageLeft:e.state.pageLeft,pageWidth:e.state.pageWidth,taskLeft:e.state.taskLeft,pageRadius:e.state.pageRadius,taskWidth:e.state.taskWidth,overflowWidth:e.state.overflowWidth,teamPageDisplaySwitch:e.teamPageDisplaySwitch,token:localStorage.getItem("token"),user:localStorage.getItem("userId"),fetchTasks:e.fetchTasks,movePage:e.movePage})}})}))},e.taskPages=function(){if(e.state.tasks.length>0)return e.state.tasks.map((function(t,a){return n.a.createElement(m.a,{key:"rout-".concat(a),exact:!0,path:"/".concat(t.teamName,"/").concat(t._id),render:function(){return n.a.createElement(B,{fetchTasks:e.fetchTasks,task:t,participate:e.participate,user:localStorage.getItem("userId"),token:localStorage.getItem("token"),pageLeft:e.state.pageLeft,pageWidth:e.state.pageWidth,pageRadius:e.state.pageRadius,taskWidth:e.state.taskWidth,overflowWidth:e.state.overflowWidth,flexFlow:e.state.flexFlow})}})}))},e.authPages=function(){var t=[];return[{key:"login",path:"/login"},{key:"signup",path:"/signup"},{key:"passwordUpdateReq",path:"/password-Update-request"},{key:"passwordUpdate",path:"/password-Update"}].map((function(a){"passwordUpdate"===a.key?t.push(n.a.createElement(m.a,{key:a.key,path:a.path,render:function(){return n.a.createElement(d,{user:e.state.user,token:localStorage.getItem("token"),link:a.key,authPicker:e.authPicker,history:L,authChange:e.authChange})}})):t.push(n.a.createElement(m.a,{key:a.key,exact:!0,path:a.path,render:function(){return n.a.createElement(d,{user:e.state.user,token:localStorage.getItem("token"),link:a.key,authPicker:e.authPicker,history:L,authChange:e.authChange})}}))})),t.push(n.a.createElement(m.a,{key:"home",exact:!0,path:"/",render:function(){return n.a.createElement("div",null)}})),n.a.createElement(m.c,null,t,e.userPages(),e.teamPages(),e.taskPages())},e.authPicker=function(t){e.movePage("close"),"logout"===t.target.id?("fa-sign-out-alt"===t.target.className.split(" ")[1]&&e.logout(),e.fetchTeams(),e.setState({link:"login",homeDisplay:"flex"})):"signup"===t.target.id&&e.setState({link:"signup",homeDisplay:"flex"})},e.home=function(t){e.movePage("close"),e.setState({link:"",homeDisplay:"none"})},e.buttonRender=function(){return e.state.user?n.a.createElement(u.b,{to:e.state.link,className:"log-btn",id:e.state.navBtn,onClick:function(t){return e.authPicker(t)}},e.state.btnTitle):n.a.createElement("div",{className:"log-btn",id:e.state.navBtn,onClick:function(t){return e.authPicker(t)}},e.state.btnTitle)},e.switchTeams=function(){return n.a.createElement(h,{teamPageDisplaySwitch:e.teamPageDisplaySwitch,token:localStorage.getItem("token"),user:localStorage.getItem("userId"),users:e.state.users,teams:e.state.teams,fetchTeams:e.fetchTeams,expandedWidth:e.state.expandedWidth,menuSignId:e.state.menuSignId,history:L,movePage:e.movePage})},e.movePage=function(t){"open"===t?e.setState({menuSignId:"first-btn",expandedWidth:"18vw",overflowWidth:"77vw",flexFlow:"flex-end",pageWidth:"79vw",pageLeft:"19vw",pageRadius:"15px",taskWidth:"76.9vw"}):e.setState({menuSignId:"",expandedWidth:"7.3vh",flexFlow:"center",overflowWidth:"91vw",pageWidth:"94vw",pageLeft:"5vw",pageRadius:"0",taskWidth:"91vw"})},e.teamPageDisplaySwitch=function(t){"none"===t?e.setState({teamPageDisplay:"none"}):e.setState({teamPageDisplay:"flex"})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},n.a.createElement(m.b,{history:L},this.switchTeams(),n.a.createElement("button",{className:"signout-btn",onClick:function(t){return e.authPicker(t)},style:{display:this.state.sigoutBtnDisplay}},n.a.createElement("div",{className:"fas fa-sign-out-alt",id:"logout"})),this.authPages(),n.a.createElement(u.b,{to:"/signup",className:"signup-btn",style:{display:this.state.signupBtnDisplay},onClick:function(t){return e.movePage("close")}},n.a.createElement("div",{className:"fas fa-user-plus",id:"signup",onClick:function(t){return e.authPicker(t)}})),n.a.createElement(u.b,{to:"/login",className:"signin-btn",style:{display:this.state.loginDisplay},onClick:function(t){return e.movePage("close")}},n.a.createElement("div",{className:"fas fa-sign-in-alt",id:"login"})),n.a.createElement(u.b,{to:"/",className:"back-home-btn ",onClick:function(t){return e.home(t)}},"S")))}}]),a}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(u.a,null,n.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[413,1,2]]]);
//# sourceMappingURL=main.6e90c201.chunk.js.map